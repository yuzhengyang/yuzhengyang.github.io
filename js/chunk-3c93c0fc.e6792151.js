(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c93c0fc"],{"05db":function(e,t,o){"use strict";o.d(t,"a",(function(){return l}));o("ac1f"),o("5319"),o("5b81"),o("1276"),o("2ca0"),o("99af"),o("a15b");var n=o("01ea"),c=(o("7a23"),o("2ef0")),a=o.n(c);function l(e){console.log("mdtools 预览预处理");for(var t=e,o=r(t),n=0;n<o.length;n++)t=t.replaceAll(o[n],i(o[n]));for(var c=d(t),a=0;a<c.length;a++)t=t.replaceAll(c[a],u(c[a]));for(var l=s(t),m=0;m<l.length;m++)t=t.replaceAll(l[m],h(l[m]));for(var O=p(t),j=0;j<O.length;j++)t=t.replaceAll(O[j],b(O[j]));return t=f(t),t}function r(e){var t=/!\[(.+?)]\(#hd.image->(.+?)\)/g,o=[],n=null;do{n=t.exec(e),n&&o.push(n[0])}while(n);return o}function i(e){var t=Object(n["a"])().imageServer+"";return e.replaceAll("(#hd.image->","("+t)}function d(e){var t=/\[(.+?)]\(#hd.ilink->(.+?)\)/g,o=[],n=null;do{n=t.exec(e),n&&o.push(n[0])}while(n);return o}function u(e){var t=window.location.protocol+"//"+window.location.host+"/collected/";return console.log(t),e.replaceAll("(#hd.ilink->","("+t)}function s(e){var t=/#hd.url:\/\//g,o=[],n=null;do{n=t.exec(e),n&&o.push(n[0])}while(n);return o}function h(e){var t=Object(n["a"])().baseServer+"";return e.replaceAll("#hd.url://",t)}function p(e){var t=/#hd.uname:\/\//g,o=[],n=null;do{n=t.exec(e),n&&o.push(n[0])}while(n);return o}function b(e){var t=Object(n["a"])().imageServer+"";return e.replaceAll("#hd.uname://",t)}function f(e,t){if(e.indexOf("# @ ")<0)return e;var o=[0,0,0,0,0,0];t&&(t[0]&&(o[0]=t[0]),t[1]&&(o[1]=t[1]),t[2]&&(o[2]=t[2]),t[3]&&(o[3]=t[3]),t[4]&&(o[4]=t[4]),t[5]&&(o[5]=t[5]));for(var n=a.a.split(e,"\n"),c=0;c<n.length;c++)n[c].startsWith("# @ ")&&(n[c]=n[c].replace("# @ ","# ".concat(++o[0]," ")),o=[o[0],0,0,0,0,0]),n[c].startsWith("## @ ")&&(0===o[0]&&++o[0],n[c]=n[c].replace("## @ ","## ".concat(o[0],".").concat(++o[1]," ")),o=[o[0],o[1],0,0,0,0]),n[c].startsWith("### @ ")&&(0===o[0]&&++o[0],0===o[1]&&++o[1],n[c]=n[c].replace("### @ ","### ".concat(o[0],".").concat(o[1],".").concat(++o[2]," ")),o=[o[0],o[1],o[2],0,0,0]),n[c].startsWith("#### @ ")&&(0===o[0]&&++o[0],0===o[1]&&++o[1],0===o[2]&&++o[2],n[c]=n[c].replace("#### @ ","#### ".concat(o[0],".").concat(o[1],".").concat(o[2],".").concat(++o[3]," ")),o=[o[0],o[1],o[2],o[3],0,0]),n[c].startsWith("##### @ ")&&(0===o[0]&&++o[0],0===o[1]&&++o[1],0===o[2]&&++o[2],0===o[3]&&++o[3],n[c]=n[c].replace("##### @ ","##### ".concat(o[0],".").concat(o[1],".").concat(o[2],".").concat(o[3],".").concat(++o[4]," ")),o=[o[0],o[1],o[2],o[3],o[4],0]),n[c].startsWith("###### @ ")&&(0===o[0]&&++o[0],0===o[1]&&++o[1],0===o[2]&&++o[2],0===o[3]&&++o[3],0===o[4]&&++o[4],n[c]=n[c].replace("###### @ ","###### ".concat(o[0],".").concat(o[1],".").concat(o[2],".").concat(o[3],".").concat(o[4],".").concat(++o[5]," ")),o=[o[0],o[1],o[2],o[3],o[4],o[5]]);return a.a.join(n,"\n")}},1276:function(e,t,o){"use strict";var n=o("2ba4"),c=o("c65b"),a=o("e330"),l=o("d784"),r=o("44e7"),i=o("825a"),d=o("1d80"),u=o("4840"),s=o("8aa5"),h=o("50c4"),p=o("577e"),b=o("dc4a"),f=o("4dae"),m=o("14c3"),O=o("9263"),j=o("9f7f"),g=o("d039"),v=j.UNSUPPORTED_Y,w=4294967295,x=Math.min,C=[].push,V=a(/./.exec),k=a(C),N=a("".slice),y=!g((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var o="ab".split(e);return 2!==o.length||"a"!==o[0]||"b"!==o[1]}));l("split",(function(e,t,o){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,o){var a=p(d(this)),l=void 0===o?w:o>>>0;if(0===l)return[];if(void 0===e)return[a];if(!r(e))return c(t,a,e,l);var i,u,s,h=[],b=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,j=new RegExp(e.source,b+"g");while(i=c(O,j,a)){if(u=j.lastIndex,u>m&&(k(h,N(a,m,i.index)),i.length>1&&i.index<a.length&&n(C,h,f(i,1)),s=i[0].length,m=u,h.length>=l))break;j.lastIndex===i.index&&j.lastIndex++}return m===a.length?!s&&V(j,"")||k(h,""):k(h,N(a,m)),h.length>l?f(h,0,l):h}:"0".split(void 0,0).length?function(e,o){return void 0===e&&0===o?[]:c(t,this,e,o)}:t,[function(t,o){var n=d(this),l=void 0==t?void 0:b(t,e);return l?c(l,t,n,o):c(a,p(n),t,o)},function(e,n){var c=i(this),l=p(e),r=o(a,c,l,n,a!==t);if(r.done)return r.value;var d=u(c,RegExp),b=c.unicode,f=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(v?"g":"y"),O=new d(v?"^(?:"+c.source+")":c,f),j=void 0===n?w:n>>>0;if(0===j)return[];if(0===l.length)return null===m(O,l)?[l]:[];var g=0,C=0,V=[];while(C<l.length){O.lastIndex=v?0:C;var y,D=m(O,v?N(l,C):l);if(null===D||(y=x(h(O.lastIndex+(v?C:0)),l.length))===g)C=s(l,C,b);else{if(k(V,N(l,g,C)),V.length===j)return V;for(var I=1;I<=D.length-1;I++)if(k(V,D[I]),V.length===j)return V;C=g=y}}return k(V,N(l,g)),V}]}),!y,v)},"2ca0":function(e,t,o){"use strict";var n=o("23e7"),c=o("e330"),a=o("06cf").f,l=o("50c4"),r=o("577e"),i=o("5a34"),d=o("1d80"),u=o("ab13"),s=o("c430"),h=c("".startsWith),p=c("".slice),b=Math.min,f=u("startsWith"),m=!s&&!f&&!!function(){var e=a(String.prototype,"startsWith");return e&&!e.writable}();n({target:"String",proto:!0,forced:!m&&!f},{startsWith:function(e){var t=r(d(this));i(e);var o=l(b(arguments.length>1?arguments[1]:void 0,t.length)),n=r(e);return h?h(t,n,o):p(t,o,o+n.length)===n}})},"440b":function(e,t,o){"use strict";o("9642")},"468c":function(e,t,o){"use strict";o.r(t);o("b0c0");var n=o("7a23"),c=Object(n["createTextVNode"])("　　保存　　"),a=Object(n["createTextVNode"])("保存并关闭"),l=Object(n["createTextVNode"])("　　关闭　　"),r=Object(n["createTextVNode"])(" 使用模板 "),i=Object(n["createTextVNode"])(" 使用文档 "),d=Object(n["createTextVNode"])(" 引用文档 "),u=Object(n["createTextVNode"])(" 插入文件 "),s=Object(n["createTextVNode"])(" 插入视频 "),h={key:0},p={style:{height:"360px"}},b=["onClick"],f={class:"dialog-footer"},m=Object(n["createTextVNode"])("关闭"),O={style:{height:"360px"}},j=["onClick"],g={class:"dialog-footer"},v=Object(n["createTextVNode"])("关闭"),w={class:"dialog-footer"},x=Object(n["createTextVNode"])("完 成");function C(e,t,o,C,V,k){var N=this,y=Object(n["resolveComponent"])("el-col"),D=Object(n["resolveComponent"])("el-input"),I=Object(n["resolveComponent"])("el-button"),_=Object(n["resolveComponent"])("el-button-group"),T=Object(n["resolveComponent"])("el-row"),U=Object(n["resolveComponent"])("Notebook"),B=Object(n["resolveComponent"])("el-icon"),E=Object(n["resolveComponent"])("Document"),S=Object(n["resolveComponent"])("Link"),$=Object(n["resolveComponent"])("FolderOpened"),P=Object(n["resolveComponent"])("VideoPlay"),L=Object(n["resolveComponent"])("el-tag"),A=Object(n["resolveComponent"])("el-header"),F=Object(n["resolveComponent"])("v-md-editor"),M=Object(n["resolveComponent"])("el-main"),J=Object(n["resolveComponent"])("el-option"),z=Object(n["resolveComponent"])("el-select"),H=Object(n["resolveComponent"])("Search"),W=Object(n["resolveComponent"])("el-collapse-item"),R=Object(n["resolveComponent"])("el-collapse"),K=Object(n["resolveComponent"])("el-container"),q=Object(n["resolveComponent"])("el-affix"),G=Object(n["resolveComponent"])("el-dialog"),Y=Object(n["resolveComponent"])("video-file-upload");return Object(n["openBlock"])(),Object(n["createBlock"])(K,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(A,{style:{height:"70px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(T,{style:{"line-height":"40px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(y,{span:8,style:{"text-align":"right","padding-right":"20px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(N.collected.name+"："+N.parentDocPath),1)]})),_:1}),Object(n["createVNode"])(y,{span:8},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(D,{modelValue:V.title,"onUpdate:modelValue":t[0]||(t[0]=function(e){return V.title=e}),placeholder:"请输入文档标题"},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(y,{span:2}),Object(n["createVNode"])(y,{span:6,style:{"text-align":"right"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(_,null,{default:Object(n["withCtx"])((function(){return[N.docId?(Object(n["openBlock"])(),Object(n["createBlock"])(I,{key:0,type:"success",onClick:k.save,round:""},{default:Object(n["withCtx"])((function(){return[c]})),_:1},8,["onClick"])):Object(n["createCommentVNode"])("",!0),N.operationStatus?(Object(n["openBlock"])(),Object(n["createBlock"])(I,{key:1,type:"primary",onClick:k.saveAndClose,round:""},{default:Object(n["withCtx"])((function(){return[a]})),_:1},8,["onClick"])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(I,{type:"danger",onClick:k.close,round:""},{default:Object(n["withCtx"])((function(){return[l]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])(T,{style:{padding:"5px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(y,{span:12},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(_,{style:{"padding-left":"5px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(I,{size:"small",onClick:t[1]||(t[1]=function(e){return k.openTempletDialog()})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(B,{style:{"padding-right":"3px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(U)]})),_:1}),r]})),_:1})]})),_:1}),Object(n["createVNode"])(_,{style:{"padding-left":"5px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(I,{size:"small"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(B,{style:{"padding-right":"3px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(E)]})),_:1}),i]})),_:1})]})),_:1}),Object(n["createVNode"])(_,{style:{"padding-left":"5px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(I,{size:"small",onClick:t[2]||(t[2]=function(e){return k.openIlinkDialog()})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(B,{style:{"padding-right":"3px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(S)]})),_:1}),d]})),_:1})]})),_:1}),Object(n["createVNode"])(_,{style:{"padding-left":"5px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(I,{size:"small"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(B,{style:{"padding-right":"3px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])($)]})),_:1}),u]})),_:1})]})),_:1}),Object(n["createVNode"])(_,{style:{"padding-left":"5px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(I,{size:"small",onClick:t[3]||(t[3]=function(e){return k.openUploadDialog()})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(B,{style:{"padding-right":"3px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(P)]})),_:1}),s]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])(y,{span:12,style:{"text-align":"right"}}),Object(n["createVNode"])(y,{span:6,style:{"text-align":"right"}},{default:Object(n["withCtx"])((function(){return[N.lockUser&&N.lockUser.realName?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",h,[Object(n["createVNode"])(L,{class:"ml-2",type:"warning",size:"small",effect:"plain"},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])("当前由："+Object(n["toDisplayString"])(N.lockUser.realName)+" 编辑锁定",1)]})),_:1})])):Object(n["createCommentVNode"])("",!0)]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])(M,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(F,{ref:"editor",modelValue:V.content,"onUpdate:modelValue":t[4]||(t[4]=function(e){return V.content=e}),height:"100%","include-level":[1,2,3,4],"disabled-menus":[],"left-toolbar":"undo redo clear | h bold italic strikethrough quote | ul ol table hr | link image code | ilink","before-preview-change":k.beforePreviewChange,onUploadImage:k.handleUploadImage,onChange:k.textChange,toolbar:e.toolbar},null,8,["modelValue","before-preview-change","onUploadImage","onChange","toolbar"])]})),_:1}),Object(n["createVNode"])(G,{modelValue:V.ilinkDialog.show,"onUpdate:modelValue":t[9]||(t[9]=function(e){return V.ilinkDialog.show=e}),title:"引用文档",width:"50%",center:""},{footer:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("span",f,[Object(n["createVNode"])(q,{position:"bottom",offset:20},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(I,{type:"primary",size:"mini",onClick:t[8]||(t[8]=function(e){return V.ilinkDialog.show=!1}),style:{width:"200px"}},{default:Object(n["withCtx"])((function(){return[m]})),_:1})]})),_:1})])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(K,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(A,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(D,{modelValue:N.ilinkDialog.searchText,"onUpdate:modelValue":t[7]||(t[7]=function(e){return N.ilinkDialog.searchText=e}),placeholder:"搜索一下",class:"input-with-select",onKeydown:k.searchIlinkEnter,clearable:""},{prepend:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(z,{modelValue:N.ilinkDialog.searchMode,"onUpdate:modelValue":t[5]||(t[5]=function(e){return N.ilinkDialog.searchMode=e}),placeholder:"Select",style:{width:"110px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(J,{label:"全文",value:"1"}),Object(n["createVNode"])(J,{label:"关键字",value:"2"})]})),_:1},8,["modelValue"])]})),append:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(I,{onClick:t[6]||(t[6]=function(e){return k.searchIlink()})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(B,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(H)]})),_:1})]})),_:1})]})),_:1},8,["modelValue","onKeydown"])]})),_:1}),Object(n["createVNode"])(M,{style:{"margin-left":"30px","margin-right":"30px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",p,[Object(n["createVNode"])(R,{accordion:""},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(N.ilinkDialog.collectedList,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(W,{key:e,title:e.name,name:e.id},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.docLites,(function(t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:t,style:{"border-bottom":"1px dashed #ccc",padding:"2px"}},[Object(n["createElementVNode"])("div",{class:"import-item",style:{cursor:"pointer"},onClick:function(o){return k.addIlinkDoc(t.title,e.id,t.id)}},[Object(n["createElementVNode"])("span",null,"　"+Object(n["toDisplayString"])(t.title)+"　",1)],8,b)])})),128))]})),_:2},1032,["title","name"])})),128))]})),_:1})])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"]),Object(n["createVNode"])(G,{modelValue:V.templetDialog.show,"onUpdate:modelValue":t[14]||(t[14]=function(e){return V.templetDialog.show=e}),title:"模板文档",width:"50%",center:""},{footer:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("span",g,[Object(n["createVNode"])(q,{position:"bottom",offset:20},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(I,{type:"primary",size:"mini",onClick:t[13]||(t[13]=function(e){return V.templetDialog.show=!1}),style:{width:"200px"}},{default:Object(n["withCtx"])((function(){return[v]})),_:1})]})),_:1})])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(K,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(A,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(D,{modelValue:N.templetDialog.searchText,"onUpdate:modelValue":t[12]||(t[12]=function(e){return N.templetDialog.searchText=e}),placeholder:"搜索一下",class:"input-with-select",onKeydown:k.searchTempletEnter,clearable:""},{prepend:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(z,{modelValue:N.templetDialog.searchMode,"onUpdate:modelValue":t[10]||(t[10]=function(e){return N.templetDialog.searchMode=e}),placeholder:"Select",style:{width:"110px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(J,{label:"全文",value:"1"}),Object(n["createVNode"])(J,{label:"关键字",value:"2"})]})),_:1},8,["modelValue"])]})),append:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(I,{onClick:t[11]||(t[11]=function(e){return k.searchTemplet()})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(B,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(H)]})),_:1})]})),_:1})]})),_:1},8,["modelValue","onKeydown"])]})),_:1}),Object(n["createVNode"])(M,{style:{"margin-left":"30px","margin-right":"30px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",O,[Object(n["createVNode"])(R,{accordion:""},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(N.templetDialog.collectedList,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(W,{key:e,title:e.name,name:e.id},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.docLites,(function(t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:t,style:{"border-bottom":"1px dashed #ccc",padding:"2px"}},[Object(n["createElementVNode"])("div",{class:"import-item",style:{cursor:"pointer"},onClick:function(o){return k.addTempletDoc(t.title,e.id,t.id)}},[Object(n["createElementVNode"])("span",null,"　"+Object(n["toDisplayString"])(t.title)+"　",1)],8,j)])})),128))]})),_:2},1032,["title","name"])})),128))]})),_:1})])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"]),Object(n["createVNode"])(G,{title:e.上传文件,modelValue:V.dialogUploadVisible,"onUpdate:modelValue":t[16]||(t[16]=function(e){return V.dialogUploadVisible=e})},{footer:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("span",w,[Object(n["createVNode"])(I,{type:"primary",onClick:t[15]||(t[15]=function(e){return V.dialogUploadVisible=!1})},{default:Object(n["withCtx"])((function(){return[x]})),_:1})])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(Y,{uploadDataParams:V.uploadDataParams,callback:k.uploadCallback,ref:"videoFileUpload"},null,8,["uploadDataParams","callback"])]})),_:1},8,["title","modelValue"])]})),_:1})}o("99af");var V=o("3ef4"),k=o("c9a1"),N=Object(n["createTextVNode"])("点击上传"),y=Object(n["createElementVNode"])("div",{class:"el-upload__tip"},"上传 mp4 文件（服务器磁盘空间有限，请注意个人账户的空间用量）",-1);function D(e,t,o,c,a,l){var r=Object(n["resolveComponent"])("el-button"),i=Object(n["resolveComponent"])("el-upload");return Object(n["openBlock"])(),Object(n["createBlock"])(i,{class:"upload-demo",action:a.fileUploadUrl,headers:a.headers,data:a.data,"on-success":l.handlerSuccess,"on-preview":l.handlePreview,"on-remove":l.handleRemove,"before-upload":l.beforeUpload,"before-remove":e.beforeRemove,multiple:"",limit:10,"on-exceed":l.handleExceed,"file-list":a.fileList,accept:"video/*"},{tip:Object(n["withCtx"])((function(){return[y]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(r,{size:"small",type:"primary"},{default:Object(n["withCtx"])((function(){return[N]})),_:1})]})),_:1},8,["action","headers","data","on-success","on-preview","on-remove","before-upload","before-remove","on-exceed","file-list"])}var I=o("b775"),_=o("5f87"),T=o("01ea"),U={props:{uploadDataParams:Object,callback:{type:Function}},data:function(){return{fileUploadUrl:"",headers:[],data:{},fileList:[]}},mounted:function(){console.log("mount begin"),this.fileUploadUrl=Object(T["a"])().baseServer+"f/u",this.headers["Access-Token"]=Object(_["e"])(),this.data=this.uploadDataParams,console.log(this.data);var e=this.$store.state.user.token;console.log("token-1-1-1: "+e);var t=this.$store.state.user.name;console.log("name: "+t),console.log("mount end")},components:{},methods:{openPanel:function(){console.log("openPanel"),this.fileList=[]},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log("handlePreview"),console.log(this.bucket),console.log(this.bucket.id),console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 10 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},beforeUpload:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),o=["mp4"];if(-1===o.indexOf(t))return this.$message.error("上传文件只能是 mp4 格式"),!1;var n=e.size/1024/1024<1024;return n?void 0:(this.$message.error("上传文件大小不能超过 1024MB"),!1)},handlerSuccess:function(e,t,o){this.callback(e.data)}}},B=(o("440b"),o("6b0d")),E=o.n(B);const S=E()(U,[["render",D]]);var $=S,P=o("05db");o("e9c4");function L(e,t,o){localStorage.setItem("ui-msg",JSON.stringify({page:e,element:t,id:o,date:Date.now()}))}o("2ef0");var A={name:"editor",data:function(){return this.toolbar={ilink:{title:"mermaid示例",icon:"v-md-icon-tip",action:function(e){e.insert((function(e){var t="```mermaid\n",o="```",n="sequenceDiagram\n    participant Alice\n    participant Bob\n    Alice->>John: Hello John, how are you?\n    loop Healthcheck\n        John->>John: Fight against hypochondria\n    end\n    Note right of John: Rational thoughts <br/>prevail!\n    John--\x3e>Alice: Great!\n    John->>Bob: How about you?\n    Bob--\x3e>John: Jolly good!\n",c=e||n;return{text:"".concat(t).concat(c).concat(o),selected:c}}))}}},{heartbeatTimer:"",ilinkDialog:{show:!1,collectedList:[],searchMode:"",searchText:""},templetDialog:{show:!1,collectedList:[],searchMode:"",searchText:""},dynamicTags:["标签一","标签二","标签三"],inputVisible:!1,inputValue:"",collected:{},activeName:"public",content:"",contentHtml:"",title:"",docId:"",parentDocId:"",parentDocPath:"",mode:"",operationStatus:!0,loadStatus:"create",createMode:"",dialogUploadVisible:!1,uploadDataParams:{bucketName:".hidoc"},lockUser:{}}},mounted:function(){var e=this;document.title="Hidoc-文档编辑器",this.loadStatus="mounted",this.$refs.editor.toggleToc(),window.isCloseHint=!0,window.addEventListener("beforeunload",(function(e){if(window.isCloseHint){var t="您所作的更改可能未保存，确认离开吗？";return(e||window.event).returnValue=t,t}})),console.log("编辑器 config: "+Object(T["a"])());var t=this.$store.state.user.token;console.log("token: "+t),console.log("route params, docId:"+this.$route.params.docId),console.log("route params, collectedId:"+this.$route.params.collectedId),console.log("route params, parentDocId:"+this.$route.params.parentDocId),console.log("route params, copyDocId:"+this.$route.params.copyDocId);var o=this.$route.params.docId,n=this.$route.params.collectedId;this.parentDocId=this.$route.params.parentDocId,this.copyDocId=this.$route.params.copyDocId,"_blank"==this.parentDocId&&(this.parentDocId=""),console.log("this.parentDocId:"+this.parentDocId),console.log("collectedId:"+n+" docId:"+o),""!=this.parentDocId&&Object(I["a"])({url:"/doc/getPath",method:"post",data:{parentDocId:this.parentDocId}}).then((function(t){0==t.code&&t.meta.path&&(console.log("层级路径为："+t.meta.path),e.parentDocPath=t.meta.path)})),Object(I["a"])({url:"/collected/get",method:"post",data:{id:this.$route.params.collectedId}}).then((function(t){switch(e.loadStatus="active",e.collected=t.meta.collected,e.uploadDataParams.collectedId=e.collected.id,o){case"_create":e.mode="create";break;default:Object(I["a"])({url:"/doc/getForEdit",method:"post",data:{id:o}}).then((function(t){if(0==t.code&&t.meta.doc)switch(e.content=t.meta.doc.content,e.title=t.meta.doc.title,e.docId=t.meta.doc.id,t.status){case"ok":if(t.meta.doc.isCurrentUserLock)console.log("当前用户获取锁，准许编辑"),document.title=e.title,e.heartbeatTimer=setInterval(e.heartbeat,6e4);else{console.log("文档已被其他成员锁定，不能编辑");var o="文档已被其他成员锁定，不能编辑，您可以联系："+t.meta.user.realName+" "+t.meta.user.email+" ，解除锁定。";e.$alert(o,{confirmButtonText:"关闭",callback:function(e){window.close()}})}break;case"lock":if(t.meta.doc.isCurrentUserLock)console.log("当前用户获取锁，准许编辑"),document.title=e.title,e.heartbeatTimer=setInterval(e.heartbeat,6e4);else{console.log("文档已被其他成员锁定，不能编辑"),e.lockUser=t.meta.user;var n="文档已被其他成员锁定，不能编辑，您可以联系："+t.meta.user.realName+" "+t.meta.user.email+" ，解除锁定。";e.$alert(n,{confirmButtonText:"关闭",callback:function(e){window.close()}})}break;case"unauth":e.operationStatus=!1,e.$alert("没有操作权限",{confirmButtonText:"关闭",callback:function(e){window.close()}});break}}));break}})),"_none"!=this.copyDocId&&Object(I["a"])({url:"/doc/get",method:"post",data:{id:this.copyDocId}}).then((function(t){0==t.code&&(e.content=t.meta.doc.content)}))},components:{VideoFileUpload:$},methods:{heartbeat:function(){return Object(I["a"])({url:"/openapi/heartbeat/lockDoc",method:"post",data:{id:this.docId}}).then((function(e){0==e.code&&console.log(e)}))},handleUploadImage:function(e,t,o){console.log(o);for(var n=new FormData,c=0;c<o.length;c++)n.append("file",o[c],o[c].name);return n.append("collectedId",this.collected.id),n.append("docId",this.docId),n.append("bucketName",".hidoc"),Object(I["a"])({url:"/f/u",method:"post",data:n}).then((function(e){0==e.code&&t({url:Object(T["a"])().hdImageFlag+e.data[0].uname,desc:"图片"})}))},uploadCallback:function(e){var t=this;if(console.log(e),e)for(var o=function(o){t.$refs.editor.insert((function(t){var n='<video width="600" controls="controls" src="#hd.uname://',c='"></video>',a=t||e[o].uname;return{text:"".concat(n).concat(a).concat(c)}}))},n=0;n<e.length;n++)o(n)},openUploadDialog:function(){this.dialogUploadVisible=!0,this.$refs["videoFileUpload"].openPanel()},beforePreviewChange:function(e,t){"active"==this.loadStatus?t(Object(P["a"])(e)):t(e)},textChange:function(e,t){console.log(this.loadStatus),"active"==this.loadStatus&&(this.$refs.editor,this.$refs.editor.codemirrorInstance)},save:function(){var e=this;return Object(I["a"])({url:"/doc/save",method:"post",data:{collectedId:this.collected.id,title:this.title,content:this.content,tag:"tag",mode:this.mode,id:this.docId,parentDocId:this.parentDocId,unlock:!1}}).then((function(t){0==t.code&&(Object(V["a"])({message:"保存成功",type:"success",duration:5e3}),L("editor","doc",e.docId))}))},saveAndClose:function(){var e=this;return Object(I["a"])({url:"/doc/save",method:"post",data:{collectedId:this.collected.id,title:this.title,content:this.content,tag:"tag",mode:this.mode,id:this.docId,parentDocId:this.parentDocId,unlock:!0}}).then((function(t){0==t.code&&(L("editor","doc",e.docId),window.isCloseHint=!1,window.close())}))},close:function(){var e=this;k["a"].confirm("关闭会丢失您修改的内容，确认继续吗？","注意",{confirmButtonText:"强制关闭页面",cancelButtonText:"继续编辑",type:"warning"}).then((function(){if("create"!=e.mode)return Object(I["a"])({url:"/doc/unlock",method:"post",data:{id:e.docId}}).then((function(e){0==e.code?(window.isCloseHint=!1,window.close()):Object(V["a"])({message:e.msg||"Error",type:"error",duration:5e3})}));console.log("创建时关闭，无需解锁"),window.isCloseHint=!1,window.close()})).catch((function(){console.log("继续编辑")}))},openIlinkDialog:function(){this.ilinkDialog.show=!0,this.searchIlink()},searchIlinkEnter:function(e){13==e.keyCode&&this.searchIlink()},searchIlink:function(){var e=this;Object(I["a"])({url:"/collected/preview",method:"post",data:{mode:this.ilinkDialog.searchMode,keyword:this.ilinkDialog.searchText,from:"editor"}}).then((function(t){0==t.code&&(e.ilinkDialog.collectedList=t.data)}))},addIlinkDoc:function(e,t,o){this.$refs.editor.insert((function(n){var c="[",a="]("+Object(T["a"])().hdIlinkFlag+t+"/"+o+")",l=n||e;return{text:"".concat(c).concat(l).concat(a),selected:l}})),this.ilinkDialog.show=!1},openTempletDialog:function(){this.templetDialog.show=!0,this.searchTemplet()},searchTempletEnter:function(e){13==e.keyCode&&this.searchTemplet()},searchTemplet:function(){var e=this;Object(I["a"])({url:"/collected/preview",method:"post",data:{mode:this.templetDialog.searchMode,keyword:this.templetDialog.searchText,from:"editor",isTemplet:!0}}).then((function(t){0==t.code&&(e.templetDialog.collectedList=t.data)}))},addTempletDoc:function(e,t,o){var n=this;Object(I["a"])({url:"/doc/get",method:"post",data:{id:o}}).then((function(e){0==e.code&&(n.doc=e.meta.doc,n.content=n.doc.content,n.templetDialog.show=!1)}))},formatContent:function(e){}}};o("fc6e");const F=E()(A,[["render",C]]);t["default"]=F},5101:function(e,t,o){},"5b81":function(e,t,o){"use strict";var n=o("23e7"),c=o("c65b"),a=o("e330"),l=o("1d80"),r=o("1626"),i=o("44e7"),d=o("577e"),u=o("dc4a"),s=o("90d8"),h=o("0cb2"),p=o("b622"),b=o("c430"),f=p("replace"),m=TypeError,O=a("".indexOf),j=a("".replace),g=a("".slice),v=Math.max,w=function(e,t,o){return o>e.length?-1:""===t?o:O(e,t,o)};n({target:"String",proto:!0},{replaceAll:function(e,t){var o,n,a,p,x,C,V,k,N,y=l(this),D=0,I=0,_="";if(null!=e){if(o=i(e),o&&(n=d(l(s(e))),!~O(n,"g")))throw m("`.replaceAll` does not allow non-global regexes");if(a=u(e,f),a)return c(a,e,y,t);if(b&&o)return j(d(y),e,t)}p=d(y),x=d(e),C=r(t),C||(t=d(t)),V=x.length,k=v(1,V),D=w(p,x,0);while(-1!==D)N=C?d(t(x,D,p)):h(x,p,D,[],void 0,t),_+=g(p,I,D)+N,I=D+V,D=w(p,x,D+k);return I<p.length&&(_+=g(p,I)),_}})},"90d8":function(e,t,o){var n=o("c65b"),c=o("1a2d"),a=o("3a9b"),l=o("ad6d"),r=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in r||c(e,"flags")||!a(r,e)?t:n(l,e)}},9642:function(e,t,o){},a15b:function(e,t,o){"use strict";var n=o("23e7"),c=o("e330"),a=o("44ad"),l=o("fc6a"),r=o("a640"),i=c([].join),d=a!=Object,u=r("join",",");n({target:"Array",proto:!0,forced:d||!u},{join:function(e){return i(l(this),void 0===e?",":e)}})},fc6e:function(e,t,o){"use strict";o("5101")}}]);
//# sourceMappingURL=chunk-3c93c0fc.e6792151.js.map