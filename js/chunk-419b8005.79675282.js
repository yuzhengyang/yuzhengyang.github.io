(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-419b8005"],{"57eb":function(e,t,o){"use strict";o("eab6")},"95ce":function(e,t,o){},9760:function(e,t,o){"use strict";o.r(t);var n=o("7a23"),r=o("cf05"),c=o.n(r),l=Object(n["createElementVNode"])("img",{alt:"logo",src:c.a,width:"96"},null,-1),a=Object(n["createElementVNode"])("div",{style:{height:"150px"}},[Object(n["createElementVNode"])("div",{style:{"text-align":"center","font-weight":"bold"}},"hidoc")],-1),i=[l,a],u=Object(n["createTextVNode"])("邮箱"),s={style:{width:"300px"}},d=Object(n["createTextVNode"])("密码"),b={style:{width:"300px"}},m={style:{width:"300px","margin-top":"30px"}},f=Object(n["createTextVNode"])("登录"),j=Object(n["createTextVNode"])("邮箱"),p={style:{width:"300px"}},O=Object(n["createTextVNode"])("动态码"),h=Object(n["createElementVNode"])("i",{class:"el-icon-back"},null,-1),w=Object(n["createTextVNode"])(" 返回 "),V=Object(n["createElementVNode"])("i",{class:"el-icon-question"},null,-1),x=Object(n["createTextVNode"])(" 忘记密码 "),g=Object(n["createElementVNode"])("i",{class:"el-icon-user"},null,-1),C=Object(n["createTextVNode"])(" 注册账号 "),N=Object(n["createTextVNode"])("获取验证码"),v={class:"dialog-footer"},k=Object(n["createTextVNode"])("取 消"),_=Object(n["createTextVNode"])("确 定");function P(e,t,o,r,c,l){var a=Object(n["resolveComponent"])("el-col"),P=Object(n["resolveComponent"])("el-row"),y=Object(n["resolveComponent"])("el-input"),F=Object(n["resolveComponent"])("el-button"),E=Object(n["resolveComponent"])("el-form"),T=Object(n["resolveComponent"])("el-tab-pane"),U=Object(n["resolveComponent"])("verification-code"),B=Object(n["resolveComponent"])("el-tabs"),D=Object(n["resolveComponent"])("el-form-item"),R=Object(n["resolveComponent"])("el-main"),$=Object(n["resolveComponent"])("el-container"),z=Object(n["resolveComponent"])("el-dialog");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createVNode"])($,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(R,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(P,{class:"login-main"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(a,{xs:24,sm:10,md:10,lg:10,xl:10},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",{class:"grid-content",style:{"text-align":"center",cursor:"pointer","margin-top":"50px"},onClick:t[0]||(t[0]=function(){return l.home&&l.home.apply(l,arguments)})},i)]})),_:1}),Object(n["createVNode"])(a,{xs:24,sm:12,md:10,lg:10,xl:10},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(B,{modelValue:c.activeName,"onUpdate:modelValue":t[5]||(t[5]=function(e){return c.activeName=e})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(T,{label:"邮箱登录",name:"first",style:{padding:"10px",height:"250px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(E,{ref:"loginForm",model:c.form,rules:c.rules,"status-icon":"","label-width":"80px"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(P,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(P,{span:24,class:"login-form-label"},{default:Object(n["withCtx"])((function(){return[u]})),_:1})]})),_:1}),Object(n["createElementVNode"])("div",s,[Object(n["createVNode"])(y,{id:"username",modelValue:c.form.username,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.form.username=e}),maxlength:"64",placeholder:"请输入邮箱或账号"},null,8,["modelValue"])]),Object(n["createVNode"])(P,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(P,{span:24,class:"login-form-label"},{default:Object(n["withCtx"])((function(){return[d]})),_:1})]})),_:1}),Object(n["createElementVNode"])("div",b,[Object(n["createVNode"])(y,{id:"password",type:"password",modelValue:c.form.password,"onUpdate:modelValue":t[2]||(t[2]=function(e){return c.form.password=e}),maxlength:"64",autocomplete:"off",placeholder:"请输入您的密码"},null,8,["modelValue"])]),Object(n["createElementVNode"])("div",m,[Object(n["createVNode"])(F,{type:"primary",onClick:t[3]||(t[3]=function(e){return l.onSubmit()}),style:{width:"200px"}},{default:Object(n["withCtx"])((function(){return[f]})),_:1})])]})),_:1},8,["model","rules"])]})),_:1}),Object(n["createVNode"])(T,{label:"动态码登录",name:"second",style:{padding:"10px",height:"250px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(E,{ref:"loginForm",model:c.form,rules:c.rules,"status-icon":"","label-width":"80px"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(P,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(P,{span:24,class:"login-form-label"},{default:Object(n["withCtx"])((function(){return[j]})),_:1})]})),_:1}),Object(n["createElementVNode"])("div",p,[Object(n["createVNode"])(y,{id:"username",modelValue:c.form.username,"onUpdate:modelValue":t[4]||(t[4]=function(e){return c.form.username=e}),maxlength:"64",placeholder:"请输入邮箱或账号"},null,8,["modelValue"])]),Object(n["createVNode"])(P,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(P,{span:24,class:"login-form-label"},{default:Object(n["withCtx"])((function(){return[O]})),_:1})]})),_:1}),Object(n["createVNode"])(U,{callback:l.totpCallback},null,8,["callback"])]})),_:1},8,["model","rules"])]})),_:1})]})),_:1},8,["modelValue"]),Object(n["createVNode"])(E,{ref:"loginForm",model:c.form,rules:c.rules,"status-icon":"","label-width":"80px"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(D,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(F,{type:"text",onClick:l.back},{default:Object(n["withCtx"])((function(){return[h,w]})),_:1},8,["onClick"])]})),_:1}),Object(n["createVNode"])(D,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(F,{type:"text",onClick:l.openResetPasswordDialog},{default:Object(n["withCtx"])((function(){return[V,x]})),_:1},8,["onClick"])]})),_:1}),Object(n["createVNode"])(D,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(F,{type:"text",onClick:l.register},{default:Object(n["withCtx"])((function(){return[g,C]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])(z,{title:"修改密码",modelValue:c.resetPasswordDialogVisible,"onUpdate:modelValue":t[11]||(t[11]=function(e){return c.resetPasswordDialogVisible=e})},{footer:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("span",v,[Object(n["createVNode"])(F,{onClick:t[10]||(t[10]=function(e){return c.resetPasswordDialogVisible=!1})},{default:Object(n["withCtx"])((function(){return[k]})),_:1}),Object(n["createVNode"])(F,{type:"primary",onClick:l.resetPassword},{default:Object(n["withCtx"])((function(){return[_]})),_:1},8,["onClick"])])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(E,{model:e.changePasswordForm},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(D,{label:"邮箱",prop:"email"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(y,{modelValue:c.resetPasswordForm.email,"onUpdate:modelValue":t[6]||(t[6]=function(e){return c.resetPasswordForm.email=e}),maxlength:"64",placeholder:"请输入您的注册邮箱"},null,8,["modelValue"]),Object(n["createVNode"])(F,{type:"text",onClick:l.getAuthCodeForResetPassword},{default:Object(n["withCtx"])((function(){return[N]})),_:1},8,["onClick"])]})),_:1}),Object(n["createVNode"])(D,{label:"验证码",prop:"authCode"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(y,{id:"authCode",modelValue:c.resetPasswordForm.authCode,"onUpdate:modelValue":t[7]||(t[7]=function(e){return c.resetPasswordForm.authCode=e}),maxlength:"64",placeholder:"请填写发送到您邮箱的验证码"},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(D,{label:"新的密码"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(y,{id:"password",modelValue:c.resetPasswordForm.password,"onUpdate:modelValue":t[8]||(t[8]=function(e){return c.resetPasswordForm.password=e}),placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(D,{label:"再输入一遍"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(y,{modelValue:c.resetPasswordForm.passwordConfirm,"onUpdate:modelValue":t[9]||(t[9]=function(e){return c.resetPasswordForm.passwordConfirm=e}),placeholder:"请再次输入密码","show-password":""},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model"])]})),_:1},8,["modelValue"])],64)}var y=o("b775"),F=o("3ef4"),E=(o("a15b"),{class:"verification-container"}),T=["onUpdate:modelValue","onInput","onKeydown"],U={name:"VerificationCode",props:{callback:{type:Function,required:!0}},setup:function(e){var t=e,o=Object(n["ref"])(["","","","","",""]),r=function(e,r){var c=r.target.value;if(o.value[e]=c,c&&e<o.value.length-1){var l=r.target.nextElementSibling;l&&Object(n["nextTick"])((function(){l.focus()}))}t.callback(o.value.join(""))},c=function(e,t){if("Backspace"===t.key&&!t.target.value&&e>0){var o=t.target.previousElementSibling;o&&Object(n["nextTick"])((function(){o.focus()}))}};return function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",E,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(o.value,(function(e,t){return Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("input",{key:t,"onUpdate:modelValue":function(e){return o.value[t]=e},onInput:function(e){return r(t,e)},onKeydown:function(e){return c(t,e)},maxlength:"1",class:"verification-input"},null,40,T)),[[n["vModelText"],o.value[t]]])})),128))])}}},B=(o("57eb"),o("6b0d")),D=o.n(B);const R=D()(U,[["__scopeId","data-v-1dee4948"]]);var $=R,z={data:function(){return{activeName:"first",resetPasswordDialogVisible:!1,form:{username:"",password:"",totpcode:""},rules:{username:[{required:!0,message:"请输入账号",trigger:"blur"}]},resetPasswordForm:{username:"",email:"",authCode:"",uid:"",password:"",passwordConfirm:""}}},components:{VerificationCode:$},setup:function(){},mounted:function(){document.title="登录",window.addEventListener("resize",this.handleResize),this.handleResize()},beforeUnmount:function(){window.removeEventListener("resize",this.handleResize)},methods:{handleResize:function(e){this.fullWidth=document.documentElement.clientWidth},home:function(){this.$router.push({path:"/",params:{}})},back:function(){this.$router.go(-1)},register:function(){this.$router.push({path:"/register",params:{}})},onSubmit:function(){var e=this;console.log("login form check"),this.$refs.loginForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;console.log("login submit"),console.log(e.$route);var o="redirect=",n=e.$route.fullPath.substring(e.$route.fullPath.indexOf(o)+o.length);e.$store.dispatch("user/login",e.form).then((function(){console.log("登录成功"),e.$router.push({path:n||"/",params:{}})})).catch((function(){console.log("登录异常")}))}))},openResetPasswordDialog:function(){this.resetPasswordDialogVisible=!0},getAuthCodeForResetPassword:function(){var e=this;Object(y["a"])({url:"/openapi/authcode/getForResetPassword",method:"post",data:{email:this.resetPasswordForm.email,token:""}}).then((function(t){0==t.code&&(e.resetPasswordForm.uid=t.meta.uid,Object(F["a"])({message:"验证码已发送至邮箱，请查收",type:"success",duration:5e3}))}))},resetPassword:function(){var e=this;Object(y["a"])({url:"/user/resetPassword",method:"post",data:this.resetPasswordForm}).then((function(t){0==t.code&&(Object(F["a"])({message:"重置密码成功",type:"success",duration:5e3}),e.resetPasswordDialogVisible=!1)}))},totpCallback:function(e){this.form.totpcode=e,console.log("totpcode is: ".concat(e)),6===this.form.totpcode.length&&this.onSubmit()}}};o("a746");const S=D()(z,[["render",P]]);t["default"]=S},a15b:function(e,t,o){"use strict";var n=o("23e7"),r=o("e330"),c=o("44ad"),l=o("fc6a"),a=o("a640"),i=r([].join),u=c!=Object,s=a("join",",");n({target:"Array",proto:!0,forced:u||!s},{join:function(e){return i(l(this),void 0===e?",":e)}})},a746:function(e,t,o){"use strict";o("95ce")},eab6:function(e,t,o){}}]);
//# sourceMappingURL=chunk-419b8005.79675282.js.map