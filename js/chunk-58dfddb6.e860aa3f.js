(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58dfddb6"],{6473:function(e,t,o){"use strict";o.r(t);o("b0c0");var c=o("7a23"),n=Object(c["createTextVNode"])("历史版本"),l=Object(c["createElementVNode"])("span",null," ",-1),r={style:{float:"left"}},i={style:{float:"right",color:"var(--el-text-color-secondary)","font-size":"13px"}},d=Object(c["createElementVNode"])("span",null," ",-1),a={style:{"line-height":"60px","text-align":"center","font-size":"30px","font-weight":"bold"}},s={style:{"line-height":"60px","text-align":"center","font-size":"30px","font-weight":"bold"}},u={style:{padding:"45px 10px 100px 10px","font-size":"12px"}},b=["onClick"];function f(e,t,o,f,h,p){var m=this,O=Object(c["resolveComponent"])("el-col"),j=Object(c["resolveComponent"])("el-row"),y=Object(c["resolveComponent"])("el-button"),C=Object(c["resolveComponent"])("el-option"),g=Object(c["resolveComponent"])("el-select"),x=Object(c["resolveComponent"])("el-affix"),v=Object(c["resolveComponent"])("v-md-editor"),V=Object(c["resolveComponent"])("el-alert"),w=Object(c["resolveComponent"])("el-main"),k=Object(c["resolveComponent"])("el-aside"),N=Object(c["resolveComponent"])("el-container");return Object(c["openBlock"])(),Object(c["createBlock"])(N,{style:{height:"100%"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(w,{ref:"docContainer",id:"docContainer"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(j,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(O,{span:24,style:{"line-height":"60px","text-align":"center","font-size":"30px","font-weight":"bold"}},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(m.collected.name),1)]})),_:1})]})),_:1}),Object(c["createVNode"])(j,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(O,{span:12,style:{"border-right":"2px dotted #9b9b9b"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(x,{offset:50},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(j,{style:{"background-color":"#fff"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(O,{span:22,offset:1},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(y,{type:"warning",size:"small"},{default:Object(c["withCtx"])((function(){return[n]})),_:1}),l,Object(c["createVNode"])(g,{modelValue:h.historyDoc.selectId,"onUpdate:modelValue":t[0]||(t[0]=function(e){return h.historyDoc.selectId=e}),placeholder:"Select",size:"small",onChange:p.getHistoryDoc},{default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(h.historyDoc.list,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])(C,{key:e.id,label:e.createTime,value:e.id},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("span",r,Object(c["toDisplayString"])(e.createTime),1),Object(c["createElementVNode"])("span",i," - "+Object(c["toDisplayString"])(e.realName),1)]})),_:2},1032,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"]),d]})),_:1})]})),_:1})]})),_:1}),Object(c["createElementVNode"])("div",a,[Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(m.historyDoc.doc.title),1)]),Object(c["createVNode"])(v,{modelValue:m.historyDoc.doc.content,"onUpdate:modelValue":t[1]||(t[1]=function(e){return m.historyDoc.doc.content=e}),mode:"preview",onCopyCodeSuccess:p.handleCopyCodeSuccess},null,8,["modelValue","onCopyCodeSuccess"])]})),_:1}),Object(c["createVNode"])(O,{span:12,style:{"border-left":"2px solid #9b9b9b"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(x,{offset:50},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(j,{style:{"background-color":"#fff"}},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(O,{span:22,offset:1},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(V,{title:"当前版本："+m.doc.updateTime,type:"success",closable:!1},null,8,["title"])]})),_:1})]})),_:1})]})),_:1}),Object(c["createElementVNode"])("div",s,[Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(m.doc.title),1)]),Object(c["createVNode"])(v,{modelValue:m.doc.content,"onUpdate:modelValue":t[2]||(t[2]=function(e){return m.doc.content=e}),mode:"preview",ref:"editor",onCopyCodeSuccess:p.handleCopyCodeSuccess},null,8,["modelValue","onCopyCodeSuccess"])]})),_:1})]})),_:1})]})),_:1},512),Object(c["createVNode"])(k,{width:"250px",style:{height:"100%"}},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",u,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(h.titles,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:e,class:"anchor-item",style:Object(c["normalizeStyle"])({padding:"4px 0 4px ".concat(10*e.indent,"px")}),onClick:function(t){return p.handleAnchorClick(e)}},[Object(c["createElementVNode"])("a",null,Object(c["toDisplayString"])(e.title),1)],12,b)})),128))])]})),_:1})]})),_:1})}o("4de4"),o("d3b7"),o("a630"),o("3ca3"),o("498a"),o("4e82"),o("6062"),o("ddb0"),o("d81d"),o("2ef0");var h=o("b775"),p=o("3ef4"),m=o("05db"),O={data:function(){return{isLogin:!1,drawer:!1,collected:{},doc:{},titles:[],collectedPermission:{detail:!1,focus:!1,his:!1,create:!1,edit:!1,copy:!1,member:!1},lockUser:{},historyDoc:{list:[],selectId:"",doc:{}}}},components:{},mounted:function(){var e=this.$store.state.user.token;this.isLogin=!(void 0==this.$store.state.user.token||""==this.$store.state.user.token),console.log("token: "+e+" collectedId:"+this.$route.params.collectedId+" docId:"+this.$route.params.docId),this.getCollected(),this.getDoc(),this.getHistoryList(),this.isLogin&&this.getPermission()},methods:{getCollected:function(){var e=this;Object(h["a"])({url:"/collected/get",method:"post",data:{id:this.$route.params.collectedId}}).then((function(t){0==t.code&&(e.collected=t.meta.collected)}))},getDoc:function(){var e=this;Object(h["a"])({url:"/doc/get",method:"post",data:{id:this.$route.params.docId}}).then((function(t){0==t.code&&(e.doc=t.meta.doc,e.doc.content=Object(m["a"])(e.doc.content),document.title=e.doc.title,t.meta.user?(e.lockUser=t.meta.user,console.log("lockUser:"+e.lockUser)):e.lockUser={},e.$nextTick((function(){var t=e.$refs.editor.$el.querySelectorAll(".v-md-editor-preview h1,h2,h3,h4,h5,h6"),o=Array.from(t).filter((function(e){return!!e.innerText.trim()}));if(o.length){var c=Array.from(new Set(o.map((function(e){return e.tagName})))).sort();e.titles=o.map((function(e){return{title:e.innerText,lineIndex:e.getAttribute("data-v-md-line"),indent:c.indexOf(e.tagName)}}))}else e.titles=[]})))}))},getHistoryList:function(){var e=this;Object(h["a"])({url:"/dochistory/list",method:"post",data:{id:this.$route.params.docId}}).then((function(t){0==t.code&&(e.historyDoc.list=t.data)}))},getPermission:function(){var e=this;Object(h["a"])({url:"/collected/permission",method:"post",data:{id:this.$route.params.collectedId}}).then((function(t){0==t.code&&(e.collectedPermission=t.meta)}))},getHistoryDoc:function(e){var t=this;Object(h["a"])({url:"/dochistory/get",method:"post",data:{id:e}}).then((function(e){0==e.code&&(t.historyDoc.doc=e.meta.docHistory)}))},handleAnchorClick:function(e){console.log("handleAnchorClick: "+e);var t=this.$refs.editor,o=e.lineIndex,c=t.$el.querySelector('.v-md-editor-preview [data-v-md-line="'.concat(o,'"]'));c?(console.log("handleAnchorClick:"+c.offsetTop),document.getElementById("docContainer").scrollTop=c.offsetTop):document.getElementById("docContainer").scrollTop=0},handleCopyCodeSuccess:function(e){Object(p["a"])({message:"复制成功",type:"success",duration:1e3})}}},j=(o("8fb5"),o("6b0d")),y=o.n(j);const C=y()(O,[["render",f]]);t["default"]=C},"8fb5":function(e,t,o){"use strict";o("a8948")},a8948:function(e,t,o){}}]);
//# sourceMappingURL=chunk-58dfddb6.e860aa3f.js.map