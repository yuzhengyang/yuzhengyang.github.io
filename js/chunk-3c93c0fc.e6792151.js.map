{"version":3,"sources":["webpack:///./src/utils/mdtools.js","webpack:///./node_modules/core-js/modules/es.string.split.js","webpack:///./node_modules/core-js/modules/es.string.starts-with.js","webpack:///./src/views/workbench/editors/VideoFileUpload.vue?380a","webpack:///./src/views/workbench/editors/editor.vue","webpack:///./src/views/workbench/editors/VideoFileUpload.vue","webpack:///./src/views/workbench/editors/VideoFileUpload.vue?3ed9","webpack:///./src/utils/uimsg.js","webpack:///./src/views/workbench/editors/editor.vue?8f95","webpack:///./node_modules/core-js/modules/es.string.replace-all.js","webpack:///./node_modules/core-js/internals/regexp-get-flags.js","webpack:///./node_modules/core-js/modules/es.array.join.js","webpack:///./src/views/workbench/editors/editor.vue?b187"],"names":["mdFormat","text","console","log","newText","images","getImages","i","length","replaceAll","psImages","quotes","getIlinks","psIlinks","getUrls","psUrls","getUnames","psUnames","setChapterNumber","str","reg","list","result","exec","push","imageUrl","config","imageServer","linkUrl","window","location","protocol","host","baseUrl","baseServer","defaultNumber","indexOf","number","array","_","split","startsWith","replace","join","apply","call","uncurryThis","fixRegExpWellKnownSymbolLogic","isRegExp","anObject","requireObjectCoercible","speciesConstructor","advanceStringIndex","toLength","toString","getMethod","arraySlice","callRegExpExec","regexpExec","stickyHelpers","fails","UNSUPPORTED_Y","MAX_UINT32","min","Math","$push","stringSlice","slice","SPLIT_WORKS_WITH_OVERWRITTEN_EXEC","re","originalExec","this","arguments","SPLIT","nativeSplit","maybeCallNative","internalSplit","separator","limit","string","lim","undefined","match","lastIndex","lastLength","output","flags","ignoreCase","multiline","unicode","sticky","lastLastIndex","separatorCopy","RegExp","source","index","O","splitter","rx","S","res","done","value","C","unicodeMatching","p","q","A","e","z","$","getOwnPropertyDescriptor","f","notARegExp","correctIsRegExpLogic","IS_PURE","un$StartsWith","CORRECT_IS_REGEXP_LOGIC","MDN_POLYFILL_BUG","descriptor","String","prototype","writable","target","proto","forced","searchString","that","search","style","class","_createBlock","_component_el_container","_createVNode","_component_el_header","_component_el_row","_component_el_col","span","collected","name","parentDocPath","_component_el_input","$data","$event","placeholder","_component_el_button_group","docId","_component_el_button","type","onClick","$options","round","operationStatus","size","_component_el_icon","_component_Notebook","_component_Document","_component_Link","_component_FolderOpened","_component_VideoPlay","lockUser","realName","_createElementBlock","_hoisted_9","_component_el_tag","effect","_toDisplayString","_component_el_main","_component_v_md_editor","ref","height","include-level","disabled-menus","left-toolbar","before-preview-change","onUploadImage","onChange","toolbar","_ctx","_component_el_dialog","show","title","width","center","footer","_createElementVNode","_component_el_affix","position","offset","ilinkDialog","searchText","onKeydown","clearable","prepend","_component_el_select","searchMode","_component_el_option","label","append","_component_Search","_component_el_collapse","accordion","_Fragment","_renderList","collectedList","colItem","_component_el_collapse_item","key","id","docLites","docItem","templetDialog","_component_video_file_upload","uploadDataParams","callback","_component_el_upload","action","headers","data","on-success","on-preview","on-remove","before-upload","before-remove","multiple","on-exceed","file-list","accept","tip","_hoisted_2","props","Object","Function","fileUploadUrl","fileList","mounted","getToken","token","$store","state","user","components","methods","openPanel","handleRemove","file","handlePreview","bucket","handleExceed","files","$message","warning","beforeUpload","fileSuffix","substring","lastIndexOf","whiteList","error","isLt2M","handlerSuccess","response","__exports__","uiRefresh","page","element","localStorage","setItem","JSON","stringify","date","Date","now","ilink","icon","editor","insert","selected","prefix","suffix","content","heartbeatTimer","dynamicTags","inputVisible","inputValue","activeName","contentHtml","parentDocId","mode","loadStatus","createMode","dialogUploadVisible","bucketName","document","$refs","toggleToc","isCloseHint","addEventListener","confirmationMessage","event","returnValue","$route","params","collectedId","copyDocId","request","url","method","then","code","meta","path","doc","status","isCurrentUserLock","setInterval","heartbeat","msg","email","$alert","confirmButtonText","close","VideoFileUpload","handleUploadImage","insertImage","FormData","hdImageFlag","uname","desc","uploadCallback","openUploadDialog","beforePreviewChange","next","textChange","html","codemirrorInstance","save","tag","unlock","ElMessage","message","duration","saveAndClose","ElMessageBox","confirm","cancelButtonText","catch","openIlinkDialog","searchIlink","searchIlinkEnter","keyCode","keyword","from","addIlinkDoc","docTitle","hdIlinkFlag","openTempletDialog","searchTemplet","searchTempletEnter","isTemplet","addTempletDoc","formatContent","render","isCallable","getRegExpFlags","getSubstitution","wellKnownSymbol","REPLACE","$TypeError","TypeError","max","stringIndexOf","searchValue","fromIndex","replaceValue","IS_REG_EXP","replacer","functionalReplace","searchLength","advanceBy","replacement","endOfLastMatch","hasOwn","isPrototypeOf","regExpFlags","RegExpPrototype","module","exports","R","IndexedObject","toIndexedObject","arrayMethodIsStrict","un$Join","ES3_STRINGS","STRICT_METHOD"],"mappings":"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","file":"js/chunk-3c93c0fc.e6792151.js","sourcesContent":["import { config } from '@/utils/config';\r\nimport { nextTick } from 'vue';\r\nimport _, { includes } from 'lodash';\r\n\r\nexport function mdFormat(text) {\r\n    console.log('mdtools 预览预处理');\r\n    let newText = text;\r\n\r\n    // ====== 处理图片链接 ======\r\n    {\r\n        let images = getImages(newText);\r\n        for (let i = 0; i < images.length; i++) {\r\n            newText = newText.replaceAll(images[i], psImages(images[i]));\r\n        }\r\n    }\r\n\r\n    // ====== 处理站内文章链接 ======\r\n    {\r\n        let quotes = getIlinks(newText);\r\n        for (let i = 0; i < quotes.length; i++) {\r\n            newText = newText.replaceAll(quotes[i], psIlinks(quotes[i]));\r\n        }\r\n    }\r\n\r\n    // ====== 处理站内连接地址 ======\r\n    {\r\n        let quotes = getUrls(newText);\r\n        for (let i = 0; i < quotes.length; i++) {\r\n            newText = newText.replaceAll(quotes[i], psUrls(quotes[i]));\r\n        }\r\n    }\r\n\r\n    // ====== 处理uname资源地址 ======\r\n    {\r\n        let quotes = getUnames(newText);\r\n        for (let i = 0; i < quotes.length; i++) {\r\n            newText = newText.replaceAll(quotes[i], psUnames(quotes[i]));\r\n        }\r\n    }\r\n\r\n    // ====== 处理超链接 ======\r\n\r\n    // ====== 处理章节序号 ======\r\n    {\r\n        newText = setChapterNumber(newText);\r\n    }\r\n\r\n    return newText;\r\n}\r\nfunction getImages(str) {\r\n    var reg = /!\\[(.+?)]\\(#hd.image->(.+?)\\)/g;\r\n    var list = [];\r\n    var result = null;\r\n    do {\r\n        result = reg.exec(str);\r\n        result && list.push(result[0]);\r\n    } while (result);\r\n    return list;\r\n}\r\nfunction psImages(str) {\r\n    let imageUrl = config().imageServer + '';\r\n    return str.replaceAll('(#hd.image->', '(' + imageUrl);\r\n}\r\n\r\nfunction getIlinks(str) {\r\n    var reg = /\\[(.+?)]\\(#hd.ilink->(.+?)\\)/g;\r\n    var list = [];\r\n    var result = null;\r\n    do {\r\n        result = reg.exec(str);\r\n        result && list.push(result[0]);\r\n    } while (result);\r\n    return list;\r\n}\r\nfunction psIlinks(str) {\r\n    let linkUrl = window.location.protocol + '//' + window.location.host + '/collected/';\r\n    console.log(linkUrl);\r\n    return str.replaceAll('(#hd.ilink->', '(' + linkUrl);\r\n}\r\n\r\nfunction getUrls(str) {\r\n    var reg = /#hd.url:\\/\\//g;\r\n    var list = [];\r\n    var result = null;\r\n    do {\r\n        result = reg.exec(str);\r\n        result && list.push(result[0]);\r\n    } while (result);\r\n    return list;\r\n}\r\nfunction psUrls(str) {\r\n    let baseUrl = config().baseServer + '';\r\n    return str.replaceAll('#hd.url://', baseUrl);\r\n}\r\n\r\nfunction getUnames(str) {\r\n    var reg = /#hd.uname:\\/\\//g;\r\n    var list = [];\r\n    var result = null;\r\n    do {\r\n        result = reg.exec(str);\r\n        result && list.push(result[0]);\r\n    } while (result);\r\n    return list;\r\n}\r\nfunction psUnames(str) {\r\n    let baseUrl = config().imageServer + '';\r\n    return str.replaceAll('#hd.uname://', baseUrl);\r\n}\r\nfunction setChapterNumber(text, defaultNumber) {\r\n    if (text.indexOf('# @ ') < 0) return text;\r\n\r\n    let number = [0, 0, 0, 0, 0, 0];\r\n    if(defaultNumber){\r\n        if(defaultNumber[0]) number[0] = defaultNumber[0];\r\n        if(defaultNumber[1]) number[1] = defaultNumber[1];\r\n        if(defaultNumber[2]) number[2] = defaultNumber[2];\r\n        if(defaultNumber[3]) number[3] = defaultNumber[3];\r\n        if(defaultNumber[4]) number[4] = defaultNumber[4];\r\n        if(defaultNumber[5]) number[5] = defaultNumber[5];\r\n    }\r\n    \r\n    let array = _.split(text, '\\n');\r\n    for (let i = 0; i < array.length; i++) {\r\n        if (array[i].startsWith('# @ ')) {\r\n            array[i] = array[i].replace('# @ ', `# ${++number[0]} `);\r\n            number = [number[0], 0, 0, 0, 0, 0];\r\n        }\r\n        if (array[i].startsWith('## @ ')) {\r\n            if (number[0] === 0) ++number[0];\r\n            array[i] = array[i].replace('## @ ', `## ${number[0]}.${++number[1]} `);\r\n            number = [number[0], number[1], 0, 0, 0, 0];\r\n        }\r\n        if (array[i].startsWith('### @ ')) {\r\n            if (number[0] === 0) ++number[0];\r\n            if (number[1] === 0) ++number[1];\r\n            array[i] = array[i].replace('### @ ', `### ${number[0]}.${number[1]}.${++number[2]} `);\r\n            number = [number[0], number[1], number[2], 0, 0, 0];\r\n        }\r\n        if (array[i].startsWith('#### @ ')) {\r\n            if (number[0] === 0) ++number[0];\r\n            if (number[1] === 0) ++number[1];\r\n            if (number[2] === 0) ++number[2];\r\n            array[i] = array[i].replace('#### @ ', `#### ${number[0]}.${number[1]}.${number[2]}.${++number[3]} `);\r\n            number = [number[0], number[1], number[2], number[3], 0, 0];\r\n        }\r\n        if (array[i].startsWith('##### @ ')) {\r\n            if (number[0] === 0) ++number[0];\r\n            if (number[1] === 0) ++number[1];\r\n            if (number[2] === 0) ++number[2];\r\n            if (number[3] === 0) ++number[3];\r\n            array[i] = array[i].replace('##### @ ', `##### ${number[0]}.${number[1]}.${number[2]}.${number[3]}.${++number[4]} `);\r\n            number = [number[0], number[1], number[2], number[3], number[4], 0];\r\n        }\r\n        if (array[i].startsWith('###### @ ')) {\r\n            if (number[0] === 0) ++number[0];\r\n            if (number[1] === 0) ++number[1];\r\n            if (number[2] === 0) ++number[2];\r\n            if (number[3] === 0) ++number[3];\r\n            if (number[4] === 0) ++number[4];\r\n            array[i] = array[i].replace('###### @ ', `###### ${number[0]}.${number[1]}.${number[2]}.${number[3]}.${number[4]}.${++number[5]} `);\r\n            number = [number[0], number[1], number[2], number[3], number[4], number[5]];\r\n        }\r\n    }\r\n\r\n    return _.join(array, '\\n');\r\n}\r\n","'use strict';\nvar apply = require('../internals/function-apply');\nvar call = require('../internals/function-call');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar isRegExp = require('../internals/is-regexp');\nvar anObject = require('../internals/an-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar speciesConstructor = require('../internals/species-constructor');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar toLength = require('../internals/to-length');\nvar toString = require('../internals/to-string');\nvar getMethod = require('../internals/get-method');\nvar arraySlice = require('../internals/array-slice-simple');\nvar callRegExpExec = require('../internals/regexp-exec-abstract');\nvar regexpExec = require('../internals/regexp-exec');\nvar stickyHelpers = require('../internals/regexp-sticky-helpers');\nvar fails = require('../internals/fails');\n\nvar UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y;\nvar MAX_UINT32 = 0xFFFFFFFF;\nvar min = Math.min;\nvar $push = [].push;\nvar exec = uncurryThis(/./.exec);\nvar push = uncurryThis($push);\nvar stringSlice = uncurryThis(''.slice);\n\n// Chrome 51 has a buggy \"split\" implementation when RegExp#exec !== nativeExec\n// Weex JS has frozen built-in prototypes, so use try / catch wrapper\nvar SPLIT_WORKS_WITH_OVERWRITTEN_EXEC = !fails(function () {\n  // eslint-disable-next-line regexp/no-empty-group -- required for testing\n  var re = /(?:)/;\n  var originalExec = re.exec;\n  re.exec = function () { return originalExec.apply(this, arguments); };\n  var result = 'ab'.split(re);\n  return result.length !== 2 || result[0] !== 'a' || result[1] !== 'b';\n});\n\n// @@split logic\nfixRegExpWellKnownSymbolLogic('split', function (SPLIT, nativeSplit, maybeCallNative) {\n  var internalSplit;\n  if (\n    'abbc'.split(/(b)*/)[1] == 'c' ||\n    // eslint-disable-next-line regexp/no-empty-group -- required for testing\n    'test'.split(/(?:)/, -1).length != 4 ||\n    'ab'.split(/(?:ab)*/).length != 2 ||\n    '.'.split(/(.?)(.?)/).length != 4 ||\n    // eslint-disable-next-line regexp/no-empty-capturing-group, regexp/no-empty-group -- required for testing\n    '.'.split(/()()/).length > 1 ||\n    ''.split(/.?/).length\n  ) {\n    // based on es5-shim implementation, need to rework it\n    internalSplit = function (separator, limit) {\n      var string = toString(requireObjectCoercible(this));\n      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;\n      if (lim === 0) return [];\n      if (separator === undefined) return [string];\n      // If `separator` is not a regex, use native split\n      if (!isRegExp(separator)) {\n        return call(nativeSplit, string, separator, lim);\n      }\n      var output = [];\n      var flags = (separator.ignoreCase ? 'i' : '') +\n                  (separator.multiline ? 'm' : '') +\n                  (separator.unicode ? 'u' : '') +\n                  (separator.sticky ? 'y' : '');\n      var lastLastIndex = 0;\n      // Make `global` and avoid `lastIndex` issues by working with a copy\n      var separatorCopy = new RegExp(separator.source, flags + 'g');\n      var match, lastIndex, lastLength;\n      while (match = call(regexpExec, separatorCopy, string)) {\n        lastIndex = separatorCopy.lastIndex;\n        if (lastIndex > lastLastIndex) {\n          push(output, stringSlice(string, lastLastIndex, match.index));\n          if (match.length > 1 && match.index < string.length) apply($push, output, arraySlice(match, 1));\n          lastLength = match[0].length;\n          lastLastIndex = lastIndex;\n          if (output.length >= lim) break;\n        }\n        if (separatorCopy.lastIndex === match.index) separatorCopy.lastIndex++; // Avoid an infinite loop\n      }\n      if (lastLastIndex === string.length) {\n        if (lastLength || !exec(separatorCopy, '')) push(output, '');\n      } else push(output, stringSlice(string, lastLastIndex));\n      return output.length > lim ? arraySlice(output, 0, lim) : output;\n    };\n  // Chakra, V8\n  } else if ('0'.split(undefined, 0).length) {\n    internalSplit = function (separator, limit) {\n      return separator === undefined && limit === 0 ? [] : call(nativeSplit, this, separator, limit);\n    };\n  } else internalSplit = nativeSplit;\n\n  return [\n    // `String.prototype.split` method\n    // https://tc39.es/ecma262/#sec-string.prototype.split\n    function split(separator, limit) {\n      var O = requireObjectCoercible(this);\n      var splitter = separator == undefined ? undefined : getMethod(separator, SPLIT);\n      return splitter\n        ? call(splitter, separator, O, limit)\n        : call(internalSplit, toString(O), separator, limit);\n    },\n    // `RegExp.prototype[@@split]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@split\n    //\n    // NOTE: This cannot be properly polyfilled in engines that don't support\n    // the 'y' flag.\n    function (string, limit) {\n      var rx = anObject(this);\n      var S = toString(string);\n      var res = maybeCallNative(internalSplit, rx, S, limit, internalSplit !== nativeSplit);\n\n      if (res.done) return res.value;\n\n      var C = speciesConstructor(rx, RegExp);\n\n      var unicodeMatching = rx.unicode;\n      var flags = (rx.ignoreCase ? 'i' : '') +\n                  (rx.multiline ? 'm' : '') +\n                  (rx.unicode ? 'u' : '') +\n                  (UNSUPPORTED_Y ? 'g' : 'y');\n\n      // ^(? + rx + ) is needed, in combination with some S slicing, to\n      // simulate the 'y' flag.\n      var splitter = new C(UNSUPPORTED_Y ? '^(?:' + rx.source + ')' : rx, flags);\n      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;\n      if (lim === 0) return [];\n      if (S.length === 0) return callRegExpExec(splitter, S) === null ? [S] : [];\n      var p = 0;\n      var q = 0;\n      var A = [];\n      while (q < S.length) {\n        splitter.lastIndex = UNSUPPORTED_Y ? 0 : q;\n        var z = callRegExpExec(splitter, UNSUPPORTED_Y ? stringSlice(S, q) : S);\n        var e;\n        if (\n          z === null ||\n          (e = min(toLength(splitter.lastIndex + (UNSUPPORTED_Y ? q : 0)), S.length)) === p\n        ) {\n          q = advanceStringIndex(S, q, unicodeMatching);\n        } else {\n          push(A, stringSlice(S, p, q));\n          if (A.length === lim) return A;\n          for (var i = 1; i <= z.length - 1; i++) {\n            push(A, z[i]);\n            if (A.length === lim) return A;\n          }\n          q = p = e;\n        }\n      }\n      push(A, stringSlice(S, p));\n      return A;\n    }\n  ];\n}, !SPLIT_WORKS_WITH_OVERWRITTEN_EXEC, UNSUPPORTED_Y);\n","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar toLength = require('../internals/to-length');\nvar toString = require('../internals/to-string');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\nvar IS_PURE = require('../internals/is-pure');\n\n// eslint-disable-next-line es-x/no-string-prototype-startswith -- safe\nvar un$StartsWith = uncurryThis(''.startsWith);\nvar stringSlice = uncurryThis(''.slice);\nvar min = Math.min;\n\nvar CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic('startsWith');\n// https://github.com/zloirock/core-js/pull/702\nvar MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!function () {\n  var descriptor = getOwnPropertyDescriptor(String.prototype, 'startsWith');\n  return descriptor && !descriptor.writable;\n}();\n\n// `String.prototype.startsWith` method\n// https://tc39.es/ecma262/#sec-string.prototype.startswith\n$({ target: 'String', proto: true, forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC }, {\n  startsWith: function startsWith(searchString /* , position = 0 */) {\n    var that = toString(requireObjectCoercible(this));\n    notARegExp(searchString);\n    var index = toLength(min(arguments.length > 1 ? arguments[1] : undefined, that.length));\n    var search = toString(searchString);\n    return un$StartsWith\n      ? un$StartsWith(that, search, index)\n      : stringSlice(that, index, index + search.length) === search;\n  }\n});\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./VideoFileUpload.vue?vue&type=style&index=0&id=286bac67&lang=css\"","<template>\r\n    <el-container>\r\n        <el-header style=\"height: 70px\">\r\n            <el-row style=\"line-height: 40px\">\r\n                <el-col :span=\"8\" style=\"text-align: right; padding-right: 20px\">{{ this.collected.name + '：' + this.parentDocPath }}</el-col>\r\n                <el-col :span=\"8\">\r\n                    <el-input v-model=\"title\" placeholder=\"请输入文档标题\"></el-input>\r\n                </el-col>\r\n                <el-col :span=\"2\"></el-col>\r\n                <el-col :span=\"6\" style=\"text-align: right\">\r\n                    <el-button-group>\r\n                        <el-button v-if=\"this.docId\" type=\"success\" @click=\"save\" round>　　保存　　</el-button>\r\n                        <el-button v-if=\"this.operationStatus\" type=\"primary\" @click=\"saveAndClose\" round>保存并关闭</el-button>\r\n                        <el-button type=\"danger\" @click=\"close\" round>　　关闭　　</el-button>\r\n                    </el-button-group>\r\n                </el-col>\r\n            </el-row>\r\n            <el-row style=\"padding: 5px\">\r\n                <el-col :span=\"12\">\r\n                    <el-button-group style=\"padding-left: 5px\">\r\n                        <el-button size=\"small\" @click=\"openTempletDialog()\">\r\n                            <el-icon style=\"padding-right: 3px\"><Notebook /></el-icon>\r\n                            使用模板\r\n                        </el-button>\r\n                    </el-button-group>\r\n                    <el-button-group style=\"padding-left: 5px\">\r\n                        <el-button size=\"small\">\r\n                            <el-icon style=\"padding-right: 3px\"><Document /></el-icon>\r\n                            使用文档\r\n                        </el-button>\r\n                    </el-button-group>\r\n                    <el-button-group style=\"padding-left: 5px\">\r\n                        <el-button size=\"small\" @click=\"openIlinkDialog()\">\r\n                            <el-icon style=\"padding-right: 3px\"><Link /></el-icon>\r\n                            引用文档\r\n                        </el-button>\r\n                        <!-- <el-button size=\"mini\">关系图谱</el-button> -->\r\n                    </el-button-group>\r\n                    <el-button-group style=\"padding-left: 5px\">\r\n                        <el-button size=\"small\">\r\n                            <el-icon style=\"padding-right: 3px\"><FolderOpened /></el-icon>\r\n                            插入文件\r\n                        </el-button>\r\n                    </el-button-group>\r\n                    <el-button-group style=\"padding-left: 5px\">\r\n                        <el-button size=\"small\" @click=\"openUploadDialog()\">\r\n                            <el-icon style=\"padding-right: 3px\"><VideoPlay /></el-icon>\r\n                            插入视频\r\n                        </el-button>\r\n                        <!-- <el-button size=\"mini\">关系图谱</el-button> -->\r\n                    </el-button-group>\r\n                </el-col>\r\n                <el-col :span=\"12\" style=\"text-align: right\">\r\n                    <!-- <el-button-group style=\"padding-left: 5px\">\r\n                        <el-button size=\"small\" @click=\"formatContent('chapterNumber')\">\r\n                            <el-icon style=\"padding-right: 3px\"><SetUp /></el-icon>\r\n                            格式化章节编号\r\n                        </el-button>\r\n                    </el-button-group> -->\r\n                </el-col>\r\n                <el-col :span=\"6\" style=\"text-align: right\">\r\n                    <span v-if=\"this.lockUser && this.lockUser.realName\">\r\n                        <el-tag class=\"ml-2\" type=\"warning\" size=\"small\" effect=\"plain\">当前由：{{ this.lockUser.realName }} 编辑锁定</el-tag>\r\n                    </span>\r\n                </el-col>\r\n            </el-row>\r\n        </el-header>\r\n        <el-main>\r\n            <v-md-editor ref=\"editor\" v-model=\"content\" height=\"100%\" :include-level=\"[1, 2, 3, 4]\" :disabled-menus=\"[]\" left-toolbar=\"undo redo clear | h bold italic strikethrough quote | ul ol table hr | link image code | ilink\" :before-preview-change=\"beforePreviewChange\" @upload-image=\"handleUploadImage\" @change=\"textChange\" :toolbar=\"toolbar\"></v-md-editor>\r\n        </el-main>\r\n\r\n        <!-- 引用文档弹出框 -->\r\n        <el-dialog v-model=\"ilinkDialog.show\" title=\"引用文档\" width=\"50%\" center>\r\n            <el-container>\r\n                <el-header>\r\n                    <el-input v-model=\"this.ilinkDialog.searchText\" placeholder=\"搜索一下\" class=\"input-with-select\" @keydown=\"searchIlinkEnter\" clearable>\r\n                        <template #prepend>\r\n                            <el-select v-model=\"this.ilinkDialog.searchMode\" placeholder=\"Select\" style=\"width: 110px\">\r\n                                <el-option label=\"全文\" value=\"1\"></el-option>\r\n                                <el-option label=\"关键字\" value=\"2\"></el-option>\r\n                            </el-select>\r\n                        </template>\r\n                        <template #append>\r\n                            <el-button @click=\"searchIlink()\">\r\n                                <el-icon><Search /></el-icon>\r\n                            </el-button>\r\n                        </template>\r\n                    </el-input>\r\n                </el-header>\r\n                <el-main style=\"margin-left: 30px; margin-right: 30px\">\r\n                    <div style=\"height: 360px\">\r\n                        <el-collapse accordion>\r\n                            <el-collapse-item v-for=\"colItem in this.ilinkDialog.collectedList\" :key=\"colItem\" :title=\"colItem.name\" :name=\"colItem.id\">\r\n                                <div v-for=\"docItem in colItem.docLites\" :key=\"docItem\" style=\"border-bottom: 1px dashed #ccc; padding: 2px\">\r\n                                    <div class=\"import-item\" style=\"cursor: pointer\" @click=\"addIlinkDoc(docItem.title, colItem.id, docItem.id)\">\r\n                                        <span>　{{ docItem.title }}　</span>\r\n                                    </div>\r\n                                </div>\r\n                            </el-collapse-item>\r\n                        </el-collapse>\r\n                    </div>\r\n                </el-main>\r\n            </el-container>\r\n            <template #footer>\r\n                <span class=\"dialog-footer\">\r\n                    <el-affix position=\"bottom\" :offset=\"20\">\r\n                        <el-button type=\"primary\" size=\"mini\" @click=\"ilinkDialog.show = false\" style=\"width: 200px\">关闭</el-button>\r\n                    </el-affix>\r\n                </span>\r\n            </template>\r\n        </el-dialog>\r\n\r\n        <!-- 模板文档弹出框 -->\r\n        <el-dialog v-model=\"templetDialog.show\" title=\"模板文档\" width=\"50%\" center>\r\n            <el-container>\r\n                <el-header>\r\n                    <el-input v-model=\"this.templetDialog.searchText\" placeholder=\"搜索一下\" class=\"input-with-select\" @keydown=\"searchTempletEnter\" clearable>\r\n                        <template #prepend>\r\n                            <el-select v-model=\"this.templetDialog.searchMode\" placeholder=\"Select\" style=\"width: 110px\">\r\n                                <el-option label=\"全文\" value=\"1\"></el-option>\r\n                                <el-option label=\"关键字\" value=\"2\"></el-option>\r\n                            </el-select>\r\n                        </template>\r\n                        <template #append>\r\n                            <el-button @click=\"searchTemplet()\">\r\n                                <el-icon><Search /></el-icon>\r\n                            </el-button>\r\n                        </template>\r\n                    </el-input>\r\n                </el-header>\r\n                <el-main style=\"margin-left: 30px; margin-right: 30px\">\r\n                    <div style=\"height: 360px\">\r\n                        <el-collapse accordion>\r\n                            <el-collapse-item v-for=\"colItem in this.templetDialog.collectedList\" :key=\"colItem\" :title=\"colItem.name\" :name=\"colItem.id\">\r\n                                <div v-for=\"docItem in colItem.docLites\" :key=\"docItem\" style=\"border-bottom: 1px dashed #ccc; padding: 2px\">\r\n                                    <div class=\"import-item\" style=\"cursor: pointer\" @click=\"addTempletDoc(docItem.title, colItem.id, docItem.id)\">\r\n                                        <span>　{{ docItem.title }}　</span>\r\n                                    </div>\r\n                                </div>\r\n                            </el-collapse-item>\r\n                        </el-collapse>\r\n                    </div>\r\n                </el-main>\r\n            </el-container>\r\n            <template #footer>\r\n                <span class=\"dialog-footer\">\r\n                    <el-affix position=\"bottom\" :offset=\"20\">\r\n                        <el-button type=\"primary\" size=\"mini\" @click=\"templetDialog.show = false\" style=\"width: 200px\">关闭</el-button>\r\n                    </el-affix>\r\n                </span>\r\n            </template>\r\n        </el-dialog>\r\n\r\n        <el-dialog :title=\"上传文件\" v-model=\"dialogUploadVisible\">\r\n            <video-file-upload v-bind:uploadDataParams=\"uploadDataParams\" :callback=\"uploadCallback\" ref=\"videoFileUpload\"></video-file-upload>\r\n            <template #footer>\r\n                <span class=\"dialog-footer\">\r\n                    <el-button type=\"primary\" @click=\"dialogUploadVisible = false\">完 成</el-button>\r\n                </span>\r\n            </template>\r\n        </el-dialog>\r\n        <!-- 文档标签 -->\r\n        <!-- <el-footer>\r\n            <el-row>\r\n                <el-tag :key=\"tag\" v-for=\"tag in dynamicTags\" closable :disable-transitions=\"false\" @close=\"handleClose(tag)\">\r\n                    {{tag}}\r\n                </el-tag>\r\n                <el-input class=\"input-new-tag\" v-if=\"inputVisible\" v-model=\"inputValue\" ref=\"saveTagInput\" size=\"small\" @keyup.enter=\"handleInputConfirm\" @blur=\"handleInputConfirm\">\r\n                </el-input>\r\n                <el-button v-else class=\"button-new-tag\" size=\"small\" @click=\"showInput\">+ New Tag</el-button>\r\n            </el-row>\r\n        </el-footer> -->\r\n    </el-container>\r\n</template>\r\n\r\n<script>\r\nimport { ElMessage, ElMessageBox } from 'element-plus';\r\nimport VideoFileUpload from './VideoFileUpload';\r\nimport request from '../../../utils/request.js';\r\nimport { config } from '@/utils/config';\r\nimport { mdFormat } from '../../../utils/mdtools';\r\nimport { uiRefresh } from '../../../utils/uimsg';\r\nimport _, { includes } from 'lodash';\r\n\r\nexport default {\r\n    name: 'editor',\r\n    data() {\r\n        this.toolbar = {\r\n            ilink: {\r\n                title: 'mermaid示例',\r\n                icon: 'v-md-icon-tip',\r\n                action(editor) {\r\n                    editor.insert(function (selected) {\r\n                        const prefix = '```mermaid\\n';\r\n                        const suffix = '```';\r\n                        const placeholder = 'sequenceDiagram\\n' + '    participant Alice\\n' + '    participant Bob\\n' + '    Alice->>John: Hello John, how are you?\\n' + '    loop Healthcheck\\n' + '        John->>John: Fight against hypochondria\\n' + '    end\\n' + '    Note right of John: Rational thoughts <br/>prevail!\\n' + '    John-->>Alice: Great!\\n' + '    John->>Bob: How about you?\\n' + '    Bob-->>John: Jolly good!\\n';\r\n                        const content = selected || placeholder;\r\n\r\n                        return {\r\n                            text: `${prefix}${content}${suffix}`,\r\n                            selected: content\r\n                        };\r\n                    });\r\n                }\r\n            }\r\n        };\r\n        return {\r\n            heartbeatTimer: '',\r\n            ilinkDialog: {\r\n                show: false,\r\n                collectedList: [],\r\n                searchMode: '',\r\n                searchText: ''\r\n            },\r\n            templetDialog: {\r\n                show: false,\r\n                collectedList: [],\r\n                searchMode: '',\r\n                searchText: ''\r\n            },\r\n            dynamicTags: ['标签一', '标签二', '标签三'],\r\n            inputVisible: false,\r\n            inputValue: '',\r\n            collected: {},\r\n            activeName: 'public',\r\n            content: '',\r\n            contentHtml: '',\r\n            title: '',\r\n            docId: '',\r\n            parentDocId: '',\r\n            parentDocPath: '',\r\n            mode: '',\r\n            operationStatus: true,\r\n            loadStatus: 'create',\r\n            createMode: '',\r\n            dialogUploadVisible: false,\r\n            uploadDataParams: {\r\n                bucketName: '.hidoc'\r\n            },\r\n            lockUser: {}\r\n        };\r\n    },\r\n    mounted() {\r\n        document.title = 'Hidoc-文档编辑器';\r\n        // 标记当前页面为加载状态\r\n        this.loadStatus = 'mounted';\r\n        // 默认开启目录导航\r\n        this.$refs.editor.toggleToc();\r\n\r\n        // ========== ========== 关闭标签页时提示 ========== ==========\r\n        window.isCloseHint = true;\r\n        window.addEventListener('beforeunload', function (e) {\r\n            if (window.isCloseHint) {\r\n                var confirmationMessage = '您所作的更改可能未保存，确认离开吗？';\r\n                (e || window.event).returnValue = confirmationMessage; // 兼容 Gecko + IE\r\n                return confirmationMessage; // 兼容 Gecko + Webkit, Safari, Chrome\r\n            }\r\n        });\r\n        // ========== ========== ========== ==========\r\n\r\n        console.log('编辑器 config: ' + config());\r\n\r\n        let token = this.$store.state.user.token;\r\n        console.log('token: ' + token);\r\n\r\n        console.log('route params, docId:' + this.$route.params.docId);\r\n        console.log('route params, collectedId:' + this.$route.params.collectedId);\r\n        console.log('route params, parentDocId:' + this.$route.params.parentDocId);\r\n        console.log('route params, copyDocId:' + this.$route.params.copyDocId);\r\n\r\n        let docId = this.$route.params.docId;\r\n        let collectedId = this.$route.params.collectedId;\r\n        this.parentDocId = this.$route.params.parentDocId;\r\n        this.copyDocId = this.$route.params.copyDocId;\r\n\r\n        // 如果附文档参数为_blank，则视为无父级的文档，直属文集，需要清空_blank\r\n        if (this.parentDocId == '_blank') this.parentDocId = '';\r\n        console.log('this.parentDocId:' + this.parentDocId);\r\n\r\n        console.log('collectedId:' + collectedId + ' docId:' + docId);\r\n\r\n        // 如果附文档ID存在，则查询文档层级路径\r\n        if (this.parentDocId != '') {\r\n            request({\r\n                url: '/doc/getPath',\r\n                method: 'post',\r\n                data: {\r\n                    parentDocId: this.parentDocId\r\n                }\r\n            }).then(res => {\r\n                if (res.code == 0 && res.meta.path) {\r\n                    console.log('层级路径为：' + res.meta.path);\r\n                    this.parentDocPath = res.meta.path;\r\n                }\r\n            });\r\n        }\r\n\r\n        // 查询文集信息\r\n        request({\r\n            url: '/collected/get',\r\n            method: 'post',\r\n            data: {\r\n                id: this.$route.params.collectedId\r\n            }\r\n        }).then(res => {\r\n            // 标记当前页面为活动状态\r\n            this.loadStatus = 'active';\r\n            this.collected = res.meta.collected;\r\n            this.uploadDataParams.collectedId = this.collected.id;\r\n\r\n            switch (docId) {\r\n                case '_create':\r\n                    this.mode = 'create';\r\n                    break;\r\n                default:\r\n                    request({\r\n                        url: '/doc/getForEdit',\r\n                        method: 'post',\r\n                        data: {\r\n                            id: docId\r\n                        }\r\n                    }).then(res => {\r\n                        if (res.code == 0 && res.meta.doc) {\r\n                            this.content = res.meta.doc.content;\r\n                            this.title = res.meta.doc.title;\r\n                            this.docId = res.meta.doc.id;\r\n\r\n                            switch (res.status) {\r\n                                case 'ok': {\r\n                                    if (res.meta.doc.isCurrentUserLock) {\r\n                                        console.log('当前用户获取锁，准许编辑');\r\n                                        document.title = this.title;\r\n                                        this.heartbeatTimer = setInterval(this.heartbeat, 60 * 1000);\r\n                                    } else {\r\n                                        console.log('文档已被其他成员锁定，不能编辑');\r\n\r\n                                        let msg = '文档已被其他成员锁定，不能编辑，您可以联系：' + res.meta.user.realName + ' ' + res.meta.user.email + ' ' + '，解除锁定。';\r\n                                        this.$alert(msg, {\r\n                                            confirmButtonText: '关闭',\r\n                                            callback: action => {\r\n                                                window.close();\r\n                                            }\r\n                                        });\r\n                                    }\r\n                                    break;\r\n                                }\r\n                                case 'lock': {\r\n                                    if (res.meta.doc.isCurrentUserLock) {\r\n                                        console.log('当前用户获取锁，准许编辑');\r\n                                        document.title = this.title;\r\n                                        this.heartbeatTimer = setInterval(this.heartbeat, 60 * 1000);\r\n                                    } else {\r\n                                        console.log('文档已被其他成员锁定，不能编辑');\r\n                                        this.lockUser = res.meta.user;\r\n\r\n                                        let msg = '文档已被其他成员锁定，不能编辑，您可以联系：' + res.meta.user.realName + ' ' + res.meta.user.email + ' ' + '，解除锁定。';\r\n                                        this.$alert(msg, {\r\n                                            confirmButtonText: '关闭',\r\n                                            callback: action => {\r\n                                                window.close();\r\n                                            }\r\n                                        });\r\n                                    }\r\n                                    break;\r\n                                }\r\n                                case 'unauth': {\r\n                                    this.operationStatus = false;\r\n                                    this.$alert('没有操作权限', {\r\n                                        confirmButtonText: '关闭',\r\n                                        callback: action => {\r\n                                            window.close();\r\n                                        }\r\n                                    });\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n                    break;\r\n            }\r\n        });\r\n\r\n        // 复制文档\r\n        if (this.copyDocId != '_none') {\r\n            request({\r\n                url: '/doc/get',\r\n                method: 'post',\r\n                data: {\r\n                    id: this.copyDocId\r\n                }\r\n            }).then(res => {\r\n                if (res.code == 0) {\r\n                    this.content = res.meta.doc.content;\r\n                }\r\n            });\r\n        }\r\n    },\r\n    components: { VideoFileUpload },\r\n    methods: {\r\n        heartbeat() {\r\n            return request({\r\n                url: '/openapi/heartbeat/lockDoc',\r\n                method: 'post',\r\n                data: {\r\n                    id: this.docId\r\n                }\r\n            }).then(res => {\r\n                if (res.code == 0) {\r\n                    console.log(res);\r\n                }\r\n            });\r\n        },\r\n        // 上传图片\r\n        handleUploadImage(event, insertImage, files) {\r\n            // debugger;\r\n            // 拿到 files 之后上传到文件服务器，然后向编辑框中插入对应的内容\r\n            console.log(files);\r\n\r\n            let data = new FormData();\r\n            for (let i = 0; i < files.length; i++) {\r\n                data.append('file', files[i], files[i].name);\r\n            }\r\n            data.append('collectedId', this.collected.id);\r\n            data.append('docId', this.docId);\r\n            data.append('bucketName', '.hidoc');\r\n            return request({\r\n                url: '/f/u',\r\n                method: 'post',\r\n                data\r\n            }).then(res => {\r\n                if (res.code == 0) {\r\n                    insertImage({\r\n                        url: config().hdImageFlag + res.data[0].uname,\r\n                        desc: '图片'\r\n                        // width: 'auto',\r\n                        // height: 'auto',\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        uploadCallback(files) {\r\n            console.log(files);\r\n            if (files) {\r\n                for (let i = 0; i < files.length; i++) {\r\n                    this.$refs.editor.insert(selected => {\r\n                        const prefix = '<video width=\"600\" controls=\"controls\" src=\"#hd.uname://';\r\n                        const suffix = '\"></video>';\r\n                        const content = selected || files[i].uname;\r\n\r\n                        return {\r\n                            // 要插入的文本\r\n                            text: `${prefix}${content}${suffix}`\r\n                        };\r\n                    });\r\n                }\r\n            }\r\n        },\r\n        // 打开上传文件窗口\r\n        openUploadDialog() {\r\n            this.dialogUploadVisible = true;\r\n            this.$refs['videoFileUpload'].openPanel();\r\n        },\r\n        // handleClose(tag) {\r\n        //     this.dynamicTags.splice(this.dynamicTags.indexOf(tag), 1);\r\n        // },\r\n        // showInput() {\r\n        //     this.inputVisible = true;\r\n        //     this.$nextTick(_ => {\r\n        //         this.$refs.saveTagInput.$refs.input.focus();\r\n        //     });\r\n        // },\r\n        // handleInputConfirm() {\r\n        //     let inputValue = this.inputValue;\r\n        //     if (inputValue) {\r\n        //         this.dynamicTags.push(inputValue);\r\n        //     }\r\n        //     this.inputVisible = false;\r\n        //     this.inputValue = '';\r\n        // },\r\n        beforePreviewChange(text, next) {\r\n            // 预览前对文本进行处理，然后再渲染预览\r\n            if (this.loadStatus == 'active') {\r\n                next(mdFormat(text));\r\n            } else {\r\n                next(text);\r\n            }\r\n        },\r\n        textChange(text, html) {\r\n            console.log(this.loadStatus);\r\n            if (this.loadStatus == 'active') {\r\n                this.$refs.editor;\r\n                this.$refs.editor.codemirrorInstance;\r\n            }\r\n        },\r\n        // 保存文档\r\n        save() {\r\n            return request({\r\n                url: '/doc/save',\r\n                method: 'post',\r\n                data: {\r\n                    collectedId: this.collected.id,\r\n                    title: this.title,\r\n                    content: this.content,\r\n                    tag: 'tag',\r\n                    mode: this.mode,\r\n                    id: this.docId,\r\n                    parentDocId: this.parentDocId,\r\n                    unlock: false\r\n                }\r\n            }).then(res => {\r\n                if (res.code == 0) {\r\n                    ElMessage({\r\n                        message: '保存成功',\r\n                        type: 'success',\r\n                        duration: 5 * 1000\r\n                    });\r\n                    uiRefresh('editor', 'doc', this.docId);\r\n                }\r\n            });\r\n        },\r\n        saveAndClose() {\r\n            return request({\r\n                url: '/doc/save',\r\n                method: 'post',\r\n                data: {\r\n                    collectedId: this.collected.id,\r\n                    title: this.title,\r\n                    content: this.content,\r\n                    tag: 'tag',\r\n                    mode: this.mode,\r\n                    id: this.docId,\r\n                    parentDocId: this.parentDocId,\r\n                    unlock: true\r\n                }\r\n            }).then(res => {\r\n                if (res.code == 0) {\r\n                    uiRefresh('editor', 'doc', this.docId);\r\n                    window.isCloseHint = false;\r\n                    window.close();\r\n                }\r\n            });\r\n        },\r\n        // 解锁并关闭编辑器\r\n        close() {\r\n            ElMessageBox.confirm('关闭会丢失您修改的内容，确认继续吗？', '注意', {\r\n                confirmButtonText: '强制关闭页面',\r\n                cancelButtonText: '继续编辑',\r\n                type: 'warning'\r\n            })\r\n                .then(() => {\r\n                    // 关闭编辑器的浏览器界面\r\n                    if (this.mode == 'create') {\r\n                        console.log('创建时关闭，无需解锁');\r\n                        window.isCloseHint = false;\r\n                        window.close();\r\n                    } else {\r\n                        return request({\r\n                            url: '/doc/unlock',\r\n                            method: 'post',\r\n                            data: {\r\n                                id: this.docId\r\n                            }\r\n                        }).then(res => {\r\n                            if (res.code == 0) {\r\n                                window.isCloseHint = false;\r\n                                window.close();\r\n                            } else {\r\n                                ElMessage({\r\n                                    message: res.msg || 'Error',\r\n                                    type: 'error',\r\n                                    duration: 5 * 1000\r\n                                });\r\n                            }\r\n                        });\r\n                    }\r\n                })\r\n                .catch(() => {\r\n                    console.log('继续编辑');\r\n                    // ElMessage({\r\n                    //     type: 'info',\r\n                    //     message: '继续编辑'\r\n                    // });\r\n                });\r\n        },\r\n        openIlinkDialog() {\r\n            // this.ilinkDialog.searchText = '';\r\n            this.ilinkDialog.show = true;\r\n            this.searchIlink();\r\n        },\r\n        searchIlinkEnter(e) {\r\n            if (e.keyCode == 13) {\r\n                this.searchIlink();\r\n            }\r\n        },\r\n        searchIlink() {\r\n            request({\r\n                url: '/collected/preview',\r\n                method: 'post',\r\n                data: { mode: this.ilinkDialog.searchMode, keyword: this.ilinkDialog.searchText, from: 'editor' }\r\n            }).then(res => {\r\n                if (res.code == 0) {\r\n                    this.ilinkDialog.collectedList = res.data;\r\n                }\r\n            });\r\n        },\r\n        addIlinkDoc(docTitle, collectedId, docId) {\r\n            this.$refs.editor.insert(selected => {\r\n                // [🧰 工具软件-数据库工具：DBeaver](#hd.ilink->121981462344892416/121983064824872960)\r\n\r\n                const prefix = '[';\r\n                const suffix = '](' + config().hdIlinkFlag + collectedId + '/' + docId + ')';\r\n                const content = selected || docTitle;\r\n\r\n                return {\r\n                    // 要插入的文本\r\n                    text: `${prefix}${content}${suffix}`,\r\n                    // 插入后要选中的文本\r\n                    selected: content\r\n                };\r\n            });\r\n            this.ilinkDialog.show = false;\r\n        },\r\n        openTempletDialog() {\r\n            // this.templetDialog.searchText = '';\r\n            this.templetDialog.show = true;\r\n            this.searchTemplet();\r\n        },\r\n        searchTempletEnter(e) {\r\n            if (e.keyCode == 13) {\r\n                this.searchTemplet();\r\n            }\r\n        },\r\n        searchTemplet() {\r\n            request({\r\n                url: '/collected/preview',\r\n                method: 'post',\r\n                data: { mode: this.templetDialog.searchMode, keyword: this.templetDialog.searchText, from: 'editor', isTemplet: true }\r\n            }).then(res => {\r\n                if (res.code == 0) {\r\n                    this.templetDialog.collectedList = res.data;\r\n                }\r\n            });\r\n        },\r\n        addTempletDoc(docTitle, collectedId, docId) {\r\n            request({\r\n                url: '/doc/get',\r\n                method: 'post',\r\n                data: { id: docId }\r\n            }).then(res => {\r\n                if (res.code == 0) {\r\n                    this.doc = res.meta.doc;\r\n                    this.content = this.doc.content;\r\n                    this.templetDialog.show = false;\r\n                }\r\n            });\r\n        },\r\n        formatContent(type) {\r\n            // switch (type) {\r\n            //     case 'chapterNumber':\r\n            //         {\r\n            //             let contentArray = _.split(this.content, '\\n');\r\n            //             console.log(contentArray);\r\n            //             let inCodeBlock = false;\r\n            //             _(contentArray).forEach(function (value) {\r\n            //                 if(value.startsWith('```')) includes = true;\r\n\r\n\r\n            //                 console.log(value);\r\n            //             });\r\n            //         }\r\n            //         break;\r\n            //     case '':\r\n            //     default:\r\n            //         break;\r\n            // }\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style>\r\n.el-tag + .el-tag {\r\n    margin-left: 10px;\r\n}\r\n.button-new-tag {\r\n    margin-left: 10px;\r\n    height: 32px;\r\n    line-height: 30px;\r\n    padding-top: 0;\r\n    padding-bottom: 0;\r\n}\r\n.input-new-tag {\r\n    width: 90px;\r\n    margin-left: 10px;\r\n    vertical-align: bottom;\r\n}\r\n/* 引用项目特效 */\r\n.import-item {\r\n    cursor: pointer;\r\n    background: transparent;\r\n    border: 0;\r\n    border-radius: 0;\r\n    position: relative;\r\n    color: #636363;\r\n}\r\n.import-item:before {\r\n    transition: all 0 linear;\r\n    content: '';\r\n    width: 0%;\r\n    height: 100%;\r\n    background: #59a1ff46;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n}\r\n.import-item:hover:before {\r\n    background: #59a1ff46;\r\n    width: 100%;\r\n}\r\n</style>\r\n","<template>\r\n    <el-upload class=\"upload-demo\" :action=\"fileUploadUrl\" :headers=\"headers\" :data=\"data\" :on-success=\"handlerSuccess\" :on-preview=\"handlePreview\" :on-remove=\"handleRemove\" :before-upload=\"beforeUpload\" :before-remove=\"beforeRemove\" multiple :limit=\"10\" :on-exceed=\"handleExceed\" :file-list=\"fileList\" accept=\"video/*\">\r\n        <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n        <template #tip>\r\n            <div class=\"el-upload__tip\">上传 mp4 文件（服务器磁盘空间有限，请注意个人账户的空间用量）</div>\r\n        </template>\r\n    </el-upload>\r\n</template>\r\n\r\n<script>\r\nimport { ElMessage } from 'element-plus';\r\nimport request from '../../../utils/request.js';\r\nimport { getToken } from '@/utils/auth';\r\nimport { config } from '@/utils/config';\r\nexport default {\r\n    props: {\r\n        uploadDataParams: Object,\r\n        callback: {\r\n            type: Function\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            fileUploadUrl: '',\r\n            headers: [],\r\n            data: {},\r\n            fileList: []\r\n        };\r\n    },\r\n    mounted() {\r\n        debugger\r\n        console.log('mount begin');\r\n        this.fileUploadUrl = config().baseServer + 'f/u';\r\n        this.headers['Access-Token'] = getToken();\r\n        this.data = this.uploadDataParams;\r\n\r\n        console.log(this.data);\r\n\r\n        //  debugger;\r\n        let token = this.$store.state.user.token;\r\n        console.log('token-1-1-1: ' + token);\r\n\r\n        let name = this.$store.state.user.name;\r\n        console.log('name: ' + name);\r\n        console.log('mount end');\r\n    },\r\n    components: {},\r\n    methods: {\r\n        openPanel() {\r\n            console.log('openPanel');\r\n            this.fileList = [];\r\n        },\r\n        handleRemove(file, fileList) {\r\n            console.log(file, fileList);\r\n        },\r\n        handlePreview(file) {\r\n            console.log('handlePreview');\r\n            console.log(this.bucket);\r\n            console.log(this.bucket.id);\r\n            console.log(file);\r\n        },\r\n        handleExceed(files, fileList) {\r\n            this.$message.warning(`当前限制选择 10 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.length + fileList.length} 个文件`);\r\n        },\r\n        beforeUpload(file) {\r\n            const fileSuffix = file.name.substring(file.name.lastIndexOf('.') + 1);\r\n\r\n            const whiteList = ['mp4'];\r\n\r\n            if (whiteList.indexOf(fileSuffix) === -1) {\r\n                this.$message.error('上传文件只能是 mp4 格式');\r\n                return false;\r\n            }\r\n\r\n            const isLt2M = file.size / 1024 / 1024 < 1024;\r\n\r\n            if (!isLt2M) {\r\n                this.$message.error('上传文件大小不能超过 1024MB');\r\n                return false;\r\n            }\r\n        },\r\n        handlerSuccess(response, file, fileList) {\r\n            this.callback(response.data);\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style>\r\n.el-main {\r\n    /* background-color: #e9eef3; */\r\n    /* color: #333; */\r\n    text-align: left;\r\n}\r\n.el-card {\r\n    margin: 10px;\r\n}\r\n</style>\r\n","import { render } from \"./VideoFileUpload.vue?vue&type=template&id=286bac67\"\nimport script from \"./VideoFileUpload.vue?vue&type=script&lang=js\"\nexport * from \"./VideoFileUpload.vue?vue&type=script&lang=js\"\n\nimport \"./VideoFileUpload.vue?vue&type=style&index=0&id=286bac67&lang=css\"\n\nimport exportComponent from \"D:\\\\code\\\\workspace\\\\mygithub\\\\Hidoc\\\\03_SRC\\\\hidoc-web\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// storage 消息通知刷新页面信息\r\n//\r\nexport function uiRefresh(page, element, id) {\r\n    localStorage.setItem('ui-msg', JSON.stringify({ page: page, element: element, id: id, date: Date.now() }));\r\n}\r\n","import { render } from \"./editor.vue?vue&type=template&id=367dfe03\"\nimport script from \"./editor.vue?vue&type=script&lang=js\"\nexport * from \"./editor.vue?vue&type=script&lang=js\"\n\nimport \"./editor.vue?vue&type=style&index=0&id=367dfe03&lang=css\"\n\nimport exportComponent from \"D:\\\\code\\\\workspace\\\\mygithub\\\\Hidoc\\\\03_SRC\\\\hidoc-web\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar isCallable = require('../internals/is-callable');\nvar isRegExp = require('../internals/is-regexp');\nvar toString = require('../internals/to-string');\nvar getMethod = require('../internals/get-method');\nvar getRegExpFlags = require('../internals/regexp-get-flags');\nvar getSubstitution = require('../internals/get-substitution');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\n\nvar REPLACE = wellKnownSymbol('replace');\nvar $TypeError = TypeError;\nvar indexOf = uncurryThis(''.indexOf);\nvar replace = uncurryThis(''.replace);\nvar stringSlice = uncurryThis(''.slice);\nvar max = Math.max;\n\nvar stringIndexOf = function (string, searchValue, fromIndex) {\n  if (fromIndex > string.length) return -1;\n  if (searchValue === '') return fromIndex;\n  return indexOf(string, searchValue, fromIndex);\n};\n\n// `String.prototype.replaceAll` method\n// https://tc39.es/ecma262/#sec-string.prototype.replaceall\n$({ target: 'String', proto: true }, {\n  replaceAll: function replaceAll(searchValue, replaceValue) {\n    var O = requireObjectCoercible(this);\n    var IS_REG_EXP, flags, replacer, string, searchString, functionalReplace, searchLength, advanceBy, replacement;\n    var position = 0;\n    var endOfLastMatch = 0;\n    var result = '';\n    if (searchValue != null) {\n      IS_REG_EXP = isRegExp(searchValue);\n      if (IS_REG_EXP) {\n        flags = toString(requireObjectCoercible(getRegExpFlags(searchValue)));\n        if (!~indexOf(flags, 'g')) throw $TypeError('`.replaceAll` does not allow non-global regexes');\n      }\n      replacer = getMethod(searchValue, REPLACE);\n      if (replacer) {\n        return call(replacer, searchValue, O, replaceValue);\n      } else if (IS_PURE && IS_REG_EXP) {\n        return replace(toString(O), searchValue, replaceValue);\n      }\n    }\n    string = toString(O);\n    searchString = toString(searchValue);\n    functionalReplace = isCallable(replaceValue);\n    if (!functionalReplace) replaceValue = toString(replaceValue);\n    searchLength = searchString.length;\n    advanceBy = max(1, searchLength);\n    position = stringIndexOf(string, searchString, 0);\n    while (position !== -1) {\n      replacement = functionalReplace\n        ? toString(replaceValue(searchString, position, string))\n        : getSubstitution(searchString, string, position, [], undefined, replaceValue);\n      result += stringSlice(string, endOfLastMatch, position) + replacement;\n      endOfLastMatch = position + searchLength;\n      position = stringIndexOf(string, searchString, position + advanceBy);\n    }\n    if (endOfLastMatch < string.length) {\n      result += stringSlice(string, endOfLastMatch);\n    }\n    return result;\n  }\n});\n","var call = require('../internals/function-call');\nvar hasOwn = require('../internals/has-own-property');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar regExpFlags = require('../internals/regexp-flags');\n\nvar RegExpPrototype = RegExp.prototype;\n\nmodule.exports = function (R) {\n  var flags = R.flags;\n  return flags === undefined && !('flags' in RegExpPrototype) && !hasOwn(R, 'flags') && isPrototypeOf(RegExpPrototype, R)\n    ? call(regExpFlags, R) : flags;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar un$Join = uncurryThis([].join);\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.es/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return un$Join(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./editor.vue?vue&type=style&index=0&id=367dfe03&lang=css\""],"sourceRoot":""}