{"version":3,"sources":["webpack:///./src/views/workbench/editors/editor.vue","webpack:///./src/views/workbench/editors/DocFileUpload.vue","webpack:///./src/views/workbench/editors/DocFileUpload.vue?dbde","webpack:///./src/utils/uimsg.js","webpack:///./src/views/workbench/editors/editor.vue?8f95","webpack:///./src/views/workbench/editors/DocFileUpload.vue?6223","webpack:///./src/views/workbench/editors/editor.vue?a288"],"names":["style","class","_createBlock","_component_el_container","_createVNode","_component_el_header","_component_el_row","_component_el_col","span","collected","name","parentDocPath","_component_el_input","$data","$event","placeholder","_component_el_button_group","docId","_component_el_button","type","onClick","$options","round","operationStatus","size","_component_el_icon","_component_Notebook","_component_Document","_component_Link","_component_FolderOpened","_component_VideoPlay","lockUser","realName","_createElementBlock","_hoisted_9","_component_el_tag","effect","_toDisplayString","_component_el_main","_component_v_md_editor","ref","height","include-level","disabled-menus","left-toolbar","before-preview-change","onUploadImage","onChange","toolbar","_ctx","_component_el_dialog","show","title","width","center","footer","_createElementVNode","_component_el_affix","position","offset","ilinkDialog","searchText","onKeydown","clearable","prepend","_component_el_select","searchMode","_component_el_option","label","value","append","_component_Search","_component_el_collapse","accordion","_Fragment","_renderList","collectedList","colItem","_component_el_collapse_item","key","id","docLites","docItem","templetDialog","dialogVisible","_component_doc_file_upload","uploadDataParams","callback","_component_el_upload","action","headers","data","on-success","on-preview","on-remove","before-upload","before-remove","multiple","limit","on-exceed","file-list","accept","tip","props","Object","Function","fileUploadUrl","fileList","fileType","fileTypeDesc","whiteList","mounted","console","log","this","config","baseServer","getToken","token","$store","state","user","components","methods","openPanel","handleRemove","file","handlePreview","bucket","handleExceed","files","$message","warning","length","beforeUpload","fileSuffix","substring","lastIndexOf","indexOf","error","isLt2M","handlerSuccess","response","__exports__","uiRefresh","page","element","localStorage","setItem","JSON","stringify","date","Date","now","ilink","icon","editor","insert","selected","prefix","suffix","content","text","heartbeatTimer","dynamicTags","inputVisible","inputValue","activeName","contentHtml","parentDocId","mode","loadStatus","createMode","uploadSet","bucketName","document","$refs","toggleToc","window","isCloseHint","addEventListener","e","confirmationMessage","event","returnValue","$route","params","collectedId","copyDocId","request","url","method","then","res","code","meta","path","doc","status","isCurrentUserLock","setInterval","heartbeat","msg","email","$alert","confirmButtonText","close","DocFileUpload","handleUploadImage","insertImage","FormData","i","hdImageFlag","uname","desc","uploadCallback","fileName","openUploadFileDialog","beforePreviewChange","next","mdFormat","textChange","html","codemirrorInstance","save","tag","unlock","ElMessage","message","duration","saveAndClose","ElMessageBox","confirm","cancelButtonText","catch","openIlinkDialog","searchIlink","searchIlinkEnter","keyCode","keyword","from","addIlinkDoc","docTitle","hdIlinkFlag","openTempletDialog","searchTemplet","searchTempletEnter","isTemplet","addTempletDoc","formatContent","render"],"mappings":"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","file":"js/chunk-ab36795e.873fa5e4.js","sourcesContent":["<template>\r\n    <el-container>\r\n        <el-header style=\"height: 70px\">\r\n            <el-row style=\"line-height: 40px\">\r\n                <el-col :span=\"8\" style=\"text-align: right; padding-right: 20px\">{{ this.collected.name + 'Ôºö' + this.parentDocPath }}</el-col>\r\n                <el-col :span=\"8\">\r\n                    <el-input v-model=\"title\" placeholder=\"ËØ∑ËæìÂÖ•ÊñáÊ°£Ê†áÈ¢ò\"></el-input>\r\n                </el-col>\r\n                <el-col :span=\"2\"></el-col>\r\n                <el-col :span=\"6\" style=\"text-align: right\">\r\n                    <el-button-group>\r\n                        <el-button v-if=\"this.docId\" type=\"success\" @click=\"save\" round>„ÄÄ„ÄÄ‰øùÂ≠ò„ÄÄ„ÄÄ</el-button>\r\n                        <el-button v-if=\"this.operationStatus\" type=\"primary\" @click=\"saveAndClose\" round>‰øùÂ≠òÂπ∂ÂÖ≥Èó≠</el-button>\r\n                        <el-button type=\"danger\" @click=\"close\" round>„ÄÄ„ÄÄÂÖ≥Èó≠„ÄÄ„ÄÄ</el-button>\r\n                    </el-button-group>\r\n                </el-col>\r\n            </el-row>\r\n            <el-row style=\"padding: 5px\">\r\n                <el-col :span=\"12\">\r\n                    <el-button-group style=\"padding-left: 5px\">\r\n                        <el-button size=\"small\" @click=\"openTempletDialog()\">\r\n                            <el-icon style=\"padding-right: 3px\"><Notebook /></el-icon>\r\n                            ‰ΩøÁî®Ê®°Êùø\r\n                        </el-button>\r\n                    </el-button-group>\r\n                    <el-button-group style=\"padding-left: 5px\">\r\n                        <el-button size=\"small\">\r\n                            <el-icon style=\"padding-right: 3px\"><Document /></el-icon>\r\n                            ‰ΩøÁî®ÊñáÊ°£\r\n                        </el-button>\r\n                    </el-button-group>\r\n                    <el-button-group style=\"padding-left: 5px\">\r\n                        <el-button size=\"small\" @click=\"openIlinkDialog()\">\r\n                            <el-icon style=\"padding-right: 3px\"><Link /></el-icon>\r\n                            ÂºïÁî®ÊñáÊ°£\r\n                        </el-button>\r\n                        <!-- <el-button size=\"mini\">ÂÖ≥Á≥ªÂõæË∞±</el-button> -->\r\n                    </el-button-group>\r\n                    <el-button-group style=\"padding-left: 5px\">\r\n                        <el-button size=\"small\" @click=\"openUploadFileDialog('')\">\r\n                            <el-icon style=\"padding-right: 3px\"><FolderOpened /></el-icon>\r\n                            ÊèíÂÖ•Êñá‰ª∂\r\n                        </el-button>\r\n                    </el-button-group>\r\n                    <el-button-group style=\"padding-left: 5px\">\r\n                        <el-button size=\"small\" @click=\"openUploadFileDialog('video')\">\r\n                            <el-icon style=\"padding-right: 3px\"><VideoPlay /></el-icon>\r\n                            ÊèíÂÖ•ËßÜÈ¢ë\r\n                        </el-button>\r\n                        <!-- <el-button size=\"mini\">ÂÖ≥Á≥ªÂõæË∞±</el-button> -->\r\n                    </el-button-group>\r\n                </el-col>\r\n                <el-col :span=\"12\" style=\"text-align: right\">\r\n                    <!-- <el-button-group style=\"padding-left: 5px\">\r\n                        <el-button size=\"small\" @click=\"formatContent('chapterNumber')\">\r\n                            <el-icon style=\"padding-right: 3px\"><SetUp /></el-icon>\r\n                            Ê†ºÂºèÂåñÁ´†ËäÇÁºñÂè∑\r\n                        </el-button>\r\n                    </el-button-group> -->\r\n                </el-col>\r\n                <el-col :span=\"6\" style=\"text-align: right\">\r\n                    <span v-if=\"this.lockUser && this.lockUser.realName\">\r\n                        <el-tag class=\"ml-2\" type=\"warning\" size=\"small\" effect=\"plain\">ÂΩìÂâçÁî±Ôºö{{ this.lockUser.realName }} ÁºñËæëÈîÅÂÆö</el-tag>\r\n                    </span>\r\n                </el-col>\r\n            </el-row>\r\n        </el-header>\r\n        <el-main>\r\n            <v-md-editor ref=\"editor\" v-model=\"content\" height=\"100%\" :include-level=\"[1, 2, 3, 4]\" :disabled-menus=\"[]\" left-toolbar=\"undo redo clear | h bold italic strikethrough quote | ul ol table hr | link image code | ilink\" :before-preview-change=\"beforePreviewChange\" @upload-image=\"handleUploadImage\" @change=\"textChange\" :toolbar=\"toolbar\"></v-md-editor>\r\n        </el-main>\r\n\r\n        <!-- ÂºïÁî®ÊñáÊ°£ÂºπÂá∫Ê°Ü -->\r\n        <el-dialog v-model=\"ilinkDialog.show\" title=\"ÂºïÁî®ÊñáÊ°£\" width=\"50%\" center>\r\n            <el-container>\r\n                <el-header>\r\n                    <el-input v-model=\"this.ilinkDialog.searchText\" placeholder=\"ÊêúÁ¥¢‰∏Ä‰∏ã\" class=\"input-with-select\" @keydown=\"searchIlinkEnter\" clearable>\r\n                        <template #prepend>\r\n                            <el-select v-model=\"this.ilinkDialog.searchMode\" placeholder=\"Select\" style=\"width: 110px\">\r\n                                <el-option label=\"ÂÖ®Êñá\" value=\"1\"></el-option>\r\n                                <el-option label=\"ÂÖ≥ÈîÆÂ≠ó\" value=\"2\"></el-option>\r\n                            </el-select>\r\n                        </template>\r\n                        <template #append>\r\n                            <el-button @click=\"searchIlink()\">\r\n                                <el-icon><Search /></el-icon>\r\n                            </el-button>\r\n                        </template>\r\n                    </el-input>\r\n                </el-header>\r\n                <el-main style=\"margin-left: 30px; margin-right: 30px\">\r\n                    <div style=\"height: 360px\">\r\n                        <el-collapse accordion>\r\n                            <el-collapse-item v-for=\"colItem in this.ilinkDialog.collectedList\" :key=\"colItem\" :title=\"colItem.name\" :name=\"colItem.id\">\r\n                                <div v-for=\"docItem in colItem.docLites\" :key=\"docItem\" style=\"border-bottom: 1px dashed #ccc; padding: 2px\">\r\n                                    <div class=\"import-item\" style=\"cursor: pointer\" @click=\"addIlinkDoc(docItem.title, colItem.id, docItem.id)\">\r\n                                        <span>„ÄÄ{{ docItem.title }}„ÄÄ</span>\r\n                                    </div>\r\n                                </div>\r\n                            </el-collapse-item>\r\n                        </el-collapse>\r\n                    </div>\r\n                </el-main>\r\n            </el-container>\r\n            <template #footer>\r\n                <span class=\"dialog-footer\">\r\n                    <el-affix position=\"bottom\" :offset=\"20\">\r\n                        <el-button type=\"primary\" size=\"mini\" @click=\"ilinkDialog.show = false\" style=\"width: 200px\">ÂÖ≥Èó≠</el-button>\r\n                    </el-affix>\r\n                </span>\r\n            </template>\r\n        </el-dialog>\r\n\r\n        <!-- Ê®°ÊùøÊñáÊ°£ÂºπÂá∫Ê°Ü -->\r\n        <el-dialog v-model=\"templetDialog.show\" title=\"Ê®°ÊùøÊñáÊ°£\" width=\"50%\" center>\r\n            <el-container>\r\n                <el-header>\r\n                    <el-input v-model=\"this.templetDialog.searchText\" placeholder=\"ÊêúÁ¥¢‰∏Ä‰∏ã\" class=\"input-with-select\" @keydown=\"searchTempletEnter\" clearable>\r\n                        <template #prepend>\r\n                            <el-select v-model=\"this.templetDialog.searchMode\" placeholder=\"Select\" style=\"width: 110px\">\r\n                                <el-option label=\"ÂÖ®Êñá\" value=\"1\"></el-option>\r\n                                <el-option label=\"ÂÖ≥ÈîÆÂ≠ó\" value=\"2\"></el-option>\r\n                            </el-select>\r\n                        </template>\r\n                        <template #append>\r\n                            <el-button @click=\"searchTemplet()\">\r\n                                <el-icon><Search /></el-icon>\r\n                            </el-button>\r\n                        </template>\r\n                    </el-input>\r\n                </el-header>\r\n                <el-main style=\"margin-left: 30px; margin-right: 30px\">\r\n                    <div style=\"height: 360px\">\r\n                        <el-collapse accordion>\r\n                            <el-collapse-item v-for=\"colItem in this.templetDialog.collectedList\" :key=\"colItem\" :title=\"colItem.name\" :name=\"colItem.id\">\r\n                                <div v-for=\"docItem in colItem.docLites\" :key=\"docItem\" style=\"border-bottom: 1px dashed #ccc; padding: 2px\">\r\n                                    <div class=\"import-item\" style=\"cursor: pointer\" @click=\"addTempletDoc(docItem.title, colItem.id, docItem.id)\">\r\n                                        <span>„ÄÄ{{ docItem.title }}„ÄÄ</span>\r\n                                    </div>\r\n                                </div>\r\n                            </el-collapse-item>\r\n                        </el-collapse>\r\n                    </div>\r\n                </el-main>\r\n            </el-container>\r\n            <template #footer>\r\n                <span class=\"dialog-footer\">\r\n                    <el-affix position=\"bottom\" :offset=\"20\">\r\n                        <el-button type=\"primary\" size=\"mini\" @click=\"templetDialog.show = false\" style=\"width: 200px\">ÂÖ≥Èó≠</el-button>\r\n                    </el-affix>\r\n                </span>\r\n            </template>\r\n        </el-dialog>\r\n\r\n        <el-dialog :title=\"‰∏ä‰º†Êñá‰ª∂\" v-model=\"uploadSet.dialogVisible\">\r\n            <doc-file-upload v-bind:uploadDataParams=\"uploadSet.uploadDataParams\" :callback=\"uploadCallback\" ref=\"docFileUpload\"></doc-file-upload>\r\n            <template #footer>\r\n                <span class=\"dialog-footer\">\r\n                    <el-button type=\"primary\" @click=\"uploadSet.dialogVisible = false\">ÂÆå Êàê</el-button>\r\n                </span>\r\n            </template>\r\n        </el-dialog>\r\n        <!-- ÊñáÊ°£Ê†áÁ≠æ -->\r\n        <!-- <el-footer>\r\n            <el-row>\r\n                <el-tag :key=\"tag\" v-for=\"tag in dynamicTags\" closable :disable-transitions=\"false\" @close=\"handleClose(tag)\">\r\n                    {{tag}}\r\n                </el-tag>\r\n                <el-input class=\"input-new-tag\" v-if=\"inputVisible\" v-model=\"inputValue\" ref=\"saveTagInput\" size=\"small\" @keyup.enter=\"handleInputConfirm\" @blur=\"handleInputConfirm\">\r\n                </el-input>\r\n                <el-button v-else class=\"button-new-tag\" size=\"small\" @click=\"showInput\">+ New Tag</el-button>\r\n            </el-row>\r\n        </el-footer> -->\r\n    </el-container>\r\n</template>\r\n\r\n<script>\r\nimport { ElMessage, ElMessageBox } from 'element-plus';\r\nimport DocFileUpload from './DocFileUpload';\r\nimport request from '../../../utils/request.js';\r\nimport { config } from '@/utils/config';\r\nimport { mdFormat } from '../../../utils/mdtools';\r\nimport { uiRefresh } from '../../../utils/uimsg';\r\nimport _, { includes } from 'lodash';\r\n\r\nexport default {\r\n    name: 'editor',\r\n    data() {\r\n        this.toolbar = {\r\n            ilink: {\r\n                title: 'mermaidÁ§∫‰æã',\r\n                icon: 'v-md-icon-tip',\r\n                action(editor) {\r\n                    editor.insert(function (selected) {\r\n                        const prefix = '```mermaid\\n';\r\n                        const suffix = '```';\r\n                        const placeholder = 'sequenceDiagram\\n' + '    participant Alice\\n' + '    participant Bob\\n' + '    Alice->>John: Hello John, how are you?\\n' + '    loop Healthcheck\\n' + '        John->>John: Fight against hypochondria\\n' + '    end\\n' + '    Note right of John: Rational thoughts <br/>prevail!\\n' + '    John-->>Alice: Great!\\n' + '    John->>Bob: How about you?\\n' + '    Bob-->>John: Jolly good!\\n';\r\n                        const content = selected || placeholder;\r\n\r\n                        return {\r\n                            text: `${prefix}${content}${suffix}`,\r\n                            selected: content\r\n                        };\r\n                    });\r\n                }\r\n            }\r\n        };\r\n        return {\r\n            heartbeatTimer: '',\r\n            ilinkDialog: {\r\n                show: false,\r\n                collectedList: [],\r\n                searchMode: '',\r\n                searchText: ''\r\n            },\r\n            templetDialog: {\r\n                show: false,\r\n                collectedList: [],\r\n                searchMode: '',\r\n                searchText: ''\r\n            },\r\n            dynamicTags: ['Ê†áÁ≠æ‰∏Ä', 'Ê†áÁ≠æ‰∫å', 'Ê†áÁ≠æ‰∏â'],\r\n            inputVisible: false,\r\n            inputValue: '',\r\n            collected: {},\r\n            activeName: 'public',\r\n            content: '',\r\n            contentHtml: '',\r\n            title: '',\r\n            docId: '',\r\n            parentDocId: '',\r\n            parentDocPath: '',\r\n            mode: '',\r\n            operationStatus: true,\r\n            loadStatus: 'create',\r\n            createMode: '',\r\n            uploadSet: {\r\n                dialogVisible: false,\r\n                uploadDataParams: {\r\n                    bucketName: '.hidoc'\r\n                }\r\n            },\r\n            lockUser: {}\r\n        };\r\n    },\r\n    mounted() {\r\n        document.title = 'Hidoc-ÊñáÊ°£ÁºñËæëÂô®';\r\n        // Ê†áËÆ∞ÂΩìÂâçÈ°µÈù¢‰∏∫Âä†ËΩΩÁä∂ÊÄÅ\r\n        this.loadStatus = 'mounted';\r\n        // ÈªòËÆ§ÂºÄÂêØÁõÆÂΩïÂØºËà™\r\n        this.$refs.editor.toggleToc();\r\n\r\n        // ========== ========== ÂÖ≥Èó≠Ê†áÁ≠æÈ°µÊó∂ÊèêÁ§∫ ========== ==========\r\n        window.isCloseHint = true;\r\n        window.addEventListener('beforeunload', function (e) {\r\n            if (window.isCloseHint) {\r\n                var confirmationMessage = 'ÊÇ®ÊâÄ‰ΩúÁöÑÊõ¥ÊîπÂèØËÉΩÊú™‰øùÂ≠òÔºåÁ°ÆËÆ§Á¶ªÂºÄÂêóÔºü';\r\n                (e || window.event).returnValue = confirmationMessage; // ÂÖºÂÆπ Gecko + IE\r\n                return confirmationMessage; // ÂÖºÂÆπ Gecko + Webkit, Safari, Chrome\r\n            }\r\n        });\r\n        // ========== ========== ========== ==========\r\n\r\n        console.log('ÁºñËæëÂô® config: ' + config());\r\n\r\n        let token = this.$store.state.user.token;\r\n        console.log('token: ' + token);\r\n\r\n        console.log('route params, docId:' + this.$route.params.docId);\r\n        console.log('route params, collectedId:' + this.$route.params.collectedId);\r\n        console.log('route params, parentDocId:' + this.$route.params.parentDocId);\r\n        console.log('route params, copyDocId:' + this.$route.params.copyDocId);\r\n\r\n        let docId = this.$route.params.docId;\r\n        let collectedId = this.$route.params.collectedId;\r\n        this.parentDocId = this.$route.params.parentDocId;\r\n        this.copyDocId = this.$route.params.copyDocId;\r\n\r\n        // Â¶ÇÊûúÈôÑÊñáÊ°£ÂèÇÊï∞‰∏∫_blankÔºåÂàôËßÜ‰∏∫Êó†Áà∂Á∫ßÁöÑÊñáÊ°£ÔºåÁõ¥Â±ûÊñáÈõÜÔºåÈúÄË¶ÅÊ∏ÖÁ©∫_blank\r\n        if (this.parentDocId == '_blank') this.parentDocId = '';\r\n        console.log('this.parentDocId:' + this.parentDocId);\r\n\r\n        console.log('collectedId:' + collectedId + ' docId:' + docId);\r\n\r\n        // Â¶ÇÊûúÈôÑÊñáÊ°£IDÂ≠òÂú®ÔºåÂàôÊü•ËØ¢ÊñáÊ°£Â±ÇÁ∫ßË∑ØÂæÑ\r\n        if (this.parentDocId != '') {\r\n            request({\r\n                url: '/doc/getPath',\r\n                method: 'post',\r\n                data: {\r\n                    parentDocId: this.parentDocId\r\n                }\r\n            }).then(res => {\r\n                if (res.code == 0 && res.meta.path) {\r\n                    console.log('Â±ÇÁ∫ßË∑ØÂæÑ‰∏∫Ôºö' + res.meta.path);\r\n                    this.parentDocPath = res.meta.path;\r\n                }\r\n            });\r\n        }\r\n\r\n        // Êü•ËØ¢ÊñáÈõÜ‰ø°ÊÅØ\r\n        request({\r\n            url: '/collected/get',\r\n            method: 'post',\r\n            data: {\r\n                id: this.$route.params.collectedId\r\n            }\r\n        }).then(res => {\r\n            // Ê†áËÆ∞ÂΩìÂâçÈ°µÈù¢‰∏∫Ê¥ªÂä®Áä∂ÊÄÅ\r\n            this.loadStatus = 'active';\r\n            this.collected = res.meta.collected;\r\n            this.uploadSet.uploadDataParams.collectedId = this.collected.id;\r\n\r\n            switch (docId) {\r\n                case '_create':\r\n                    this.mode = 'create';\r\n                    break;\r\n                default:\r\n                    request({\r\n                        url: '/doc/getForEdit',\r\n                        method: 'post',\r\n                        data: {\r\n                            id: docId\r\n                        }\r\n                    }).then(res => {\r\n                        if (res.code == 0 && res.meta.doc) {\r\n                            this.content = res.meta.doc.content;\r\n                            this.title = res.meta.doc.title;\r\n                            this.docId = res.meta.doc.id;\r\n\r\n                            switch (res.status) {\r\n                                case 'ok': {\r\n                                    if (res.meta.doc.isCurrentUserLock) {\r\n                                        console.log('ÂΩìÂâçÁî®Êà∑Ëé∑ÂèñÈîÅÔºåÂáÜËÆ∏ÁºñËæë');\r\n                                        document.title = this.title;\r\n                                        this.heartbeatTimer = setInterval(this.heartbeat, 60 * 1000);\r\n                                    } else {\r\n                                        console.log('ÊñáÊ°£Â∑≤Ë¢´ÂÖ∂‰ªñÊàêÂëòÈîÅÂÆöÔºå‰∏çËÉΩÁºñËæë');\r\n\r\n                                        let msg = 'ÊñáÊ°£Â∑≤Ë¢´ÂÖ∂‰ªñÊàêÂëòÈîÅÂÆöÔºå‰∏çËÉΩÁºñËæëÔºåÊÇ®ÂèØ‰ª•ËÅîÁ≥ªÔºö' + res.meta.user.realName + ' ' + res.meta.user.email + ' ' + 'ÔºåËß£Èô§ÈîÅÂÆö„ÄÇ';\r\n                                        this.$alert(msg, {\r\n                                            confirmButtonText: 'ÂÖ≥Èó≠',\r\n                                            callback: action => {\r\n                                                window.close();\r\n                                            }\r\n                                        });\r\n                                    }\r\n                                    break;\r\n                                }\r\n                                case 'lock': {\r\n                                    if (res.meta.doc.isCurrentUserLock) {\r\n                                        console.log('ÂΩìÂâçÁî®Êà∑Ëé∑ÂèñÈîÅÔºåÂáÜËÆ∏ÁºñËæë');\r\n                                        document.title = this.title;\r\n                                        this.heartbeatTimer = setInterval(this.heartbeat, 60 * 1000);\r\n                                    } else {\r\n                                        console.log('ÊñáÊ°£Â∑≤Ë¢´ÂÖ∂‰ªñÊàêÂëòÈîÅÂÆöÔºå‰∏çËÉΩÁºñËæë');\r\n                                        this.lockUser = res.meta.user;\r\n\r\n                                        let msg = 'ÊñáÊ°£Â∑≤Ë¢´ÂÖ∂‰ªñÊàêÂëòÈîÅÂÆöÔºå‰∏çËÉΩÁºñËæëÔºåÊÇ®ÂèØ‰ª•ËÅîÁ≥ªÔºö' + res.meta.user.realName + ' ' + res.meta.user.email + ' ' + 'ÔºåËß£Èô§ÈîÅÂÆö„ÄÇ';\r\n                                        this.$alert(msg, {\r\n                                            confirmButtonText: 'ÂÖ≥Èó≠',\r\n                                            callback: action => {\r\n                                                window.close();\r\n                                            }\r\n                                        });\r\n                                    }\r\n                                    break;\r\n                                }\r\n                                case 'unauth': {\r\n                                    this.operationStatus = false;\r\n                                    this.$alert('Ê≤°ÊúâÊìç‰ΩúÊùÉÈôê', {\r\n                                        confirmButtonText: 'ÂÖ≥Èó≠',\r\n                                        callback: action => {\r\n                                            window.close();\r\n                                        }\r\n                                    });\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n                    break;\r\n            }\r\n        });\r\n\r\n        // Â§çÂà∂ÊñáÊ°£\r\n        if (this.copyDocId != '_none') {\r\n            request({\r\n                url: '/doc/get',\r\n                method: 'post',\r\n                data: {\r\n                    id: this.copyDocId\r\n                }\r\n            }).then(res => {\r\n                if (res.code == 0) {\r\n                    this.content = res.meta.doc.content;\r\n                }\r\n            });\r\n        }\r\n    },\r\n    components: { DocFileUpload },\r\n    methods: {\r\n        heartbeat() {\r\n            return request({\r\n                url: '/openapi/heartbeat/lockDoc',\r\n                method: 'post',\r\n                data: {\r\n                    id: this.docId\r\n                }\r\n            }).then(res => {\r\n                if (res.code == 0) {\r\n                    console.log(res);\r\n                }\r\n            });\r\n        },\r\n        // ‰∏ä‰º†ÂõæÁâá\r\n        handleUploadImage(event, insertImage, files) {\r\n            // debugger;\r\n            // ÊãøÂà∞ files ‰πãÂêé‰∏ä‰º†Âà∞Êñá‰ª∂ÊúçÂä°Âô®ÔºåÁÑ∂ÂêéÂêëÁºñËæëÊ°Ü‰∏≠ÊèíÂÖ•ÂØπÂ∫îÁöÑÂÜÖÂÆπ\r\n            console.log(files);\r\n\r\n            let data = new FormData();\r\n            for (let i = 0; i < files.length; i++) {\r\n                data.append('file', files[i], files[i].name);\r\n            }\r\n            data.append('collectedId', this.collected.id);\r\n            data.append('docId', this.docId);\r\n            data.append('bucketName', '.hidoc');\r\n            return request({\r\n                url: '/f/u',\r\n                method: 'post',\r\n                data\r\n            }).then(res => {\r\n                if (res.code == 0) {\r\n                    insertImage({\r\n                        url: config().hdImageFlag + res.data[0].uname,\r\n                        desc: 'ÂõæÁâá'\r\n                        // width: 'auto',\r\n                        // height: 'auto',\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        uploadCallback(files) {\r\n            debugger;\r\n            if (files) {\r\n                for (let i = 0; i < files.length; i++) {\r\n                    // Ê†πÊçÆÊñá‰ª∂ÂêçÔºåËé∑ÂèñÊñá‰ª∂ÂêéÁºÄ\r\n                    const fileName = files[i].fileName;\r\n                    const uname = files[i].uname;\r\n                    const id = files[i].id;\r\n                    const fileSuffix = fileName.substring(fileName.lastIndexOf('.') + 1);\r\n\r\n                    // Ê†πÊçÆ‰∏çÂêåÂêéÁºÄÁöÑÊñá‰ª∂Á±ªÂûãÔºåÊâ©Â±ï‰∏çÂêåÁöÑÊòæÁ§∫ÊñπÂºè\r\n                    switch (fileSuffix) {\r\n                        case 'mp4':\r\n                            {\r\n                                this.$refs.editor.insert(selected => {\r\n                                    const prefix = '<video width=\"600\" controls=\"controls\" src=\"#hd.uname://';\r\n                                    const suffix = '\"></video>';\r\n                                    const content = selected || uname;\r\n\r\n                                    return {\r\n                                        // Ë¶ÅÊèíÂÖ•ÁöÑÊñáÊú¨\r\n                                        text: `${prefix}${content}${suffix}`\r\n                                    };\r\n                                });\r\n                            }\r\n                            break;\r\n                        case 'doc':\r\n                        case 'docx':\r\n                        case 'xls':\r\n                        case 'xlsx':\r\n                        case 'ppt':\r\n                        case 'pptx':\r\n                        case 'pdf':\r\n                        case 'txt':\r\n                        case 'zip':\r\n                        case 'rar':\r\n                        case '7z':\r\n                        default:\r\n                            {\r\n                                this.$refs.editor.insert(selected => {\r\n                                    const prefix = `<div data-hd-file=\"${id}\">`;\r\n                                    const suffix = `</div>`;\r\n                                    const content = selected || fileName;\r\n\r\n                                    return {\r\n                                        // Ë¶ÅÊèíÂÖ•ÁöÑÊñáÊú¨\r\n                                        text: `${prefix}${content}${suffix}`\r\n                                    };\r\n                                });\r\n                            }\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        // ÊâìÂºÄ‰∏ä‰º†Êñá‰ª∂Á™óÂè£\r\n        openUploadFileDialog(fileType) {\r\n            this.uploadSet.dialogVisible = true;\r\n            this.uploadSet.uploadDataParams.fileType = fileType;\r\n            this.$refs['docFileUpload'].openPanel();\r\n        },\r\n        // handleClose(tag) {\r\n        //     this.dynamicTags.splice(this.dynamicTags.indexOf(tag), 1);\r\n        // },\r\n        // showInput() {\r\n        //     this.inputVisible = true;\r\n        //     this.$nextTick(_ => {\r\n        //         this.$refs.saveTagInput.$refs.input.focus();\r\n        //     });\r\n        // },\r\n        // handleInputConfirm() {\r\n        //     let inputValue = this.inputValue;\r\n        //     if (inputValue) {\r\n        //         this.dynamicTags.push(inputValue);\r\n        //     }\r\n        //     this.inputVisible = false;\r\n        //     this.inputValue = '';\r\n        // },\r\n        beforePreviewChange(text, next) {\r\n            // È¢ÑËßàÂâçÂØπÊñáÊú¨ËøõË°åÂ§ÑÁêÜÔºåÁÑ∂ÂêéÂÜçÊ∏≤ÊüìÈ¢ÑËßà\r\n            if (this.loadStatus == 'active') {\r\n                next(mdFormat(text));\r\n            } else {\r\n                next(text);\r\n            }\r\n        },\r\n        textChange(text, html) {\r\n            console.log(this.loadStatus);\r\n            if (this.loadStatus == 'active') {\r\n                this.$refs.editor;\r\n                this.$refs.editor.codemirrorInstance;\r\n            }\r\n        },\r\n        // ‰øùÂ≠òÊñáÊ°£\r\n        save() {\r\n            return request({\r\n                url: '/doc/save',\r\n                method: 'post',\r\n                data: {\r\n                    collectedId: this.collected.id,\r\n                    title: this.title,\r\n                    content: this.content,\r\n                    tag: 'tag',\r\n                    mode: this.mode,\r\n                    id: this.docId,\r\n                    parentDocId: this.parentDocId,\r\n                    unlock: false\r\n                }\r\n            }).then(res => {\r\n                if (res.code == 0) {\r\n                    ElMessage({\r\n                        message: '‰øùÂ≠òÊàêÂäü',\r\n                        type: 'success',\r\n                        duration: 5 * 1000\r\n                    });\r\n                    uiRefresh('editor', 'doc', this.docId);\r\n                }\r\n            });\r\n        },\r\n        saveAndClose() {\r\n            return request({\r\n                url: '/doc/save',\r\n                method: 'post',\r\n                data: {\r\n                    collectedId: this.collected.id,\r\n                    title: this.title,\r\n                    content: this.content,\r\n                    tag: 'tag',\r\n                    mode: this.mode,\r\n                    id: this.docId,\r\n                    parentDocId: this.parentDocId,\r\n                    unlock: true\r\n                }\r\n            }).then(res => {\r\n                if (res.code == 0) {\r\n                    uiRefresh('editor', 'doc', this.docId);\r\n                    window.isCloseHint = false;\r\n                    window.close();\r\n                }\r\n            });\r\n        },\r\n        // Ëß£ÈîÅÂπ∂ÂÖ≥Èó≠ÁºñËæëÂô®\r\n        close() {\r\n            ElMessageBox.confirm('ÂÖ≥Èó≠‰ºö‰∏¢Â§±ÊÇ®‰øÆÊîπÁöÑÂÜÖÂÆπÔºåÁ°ÆËÆ§ÁªßÁª≠ÂêóÔºü', 'Ê≥®ÊÑè', {\r\n                confirmButtonText: 'Âº∫Âà∂ÂÖ≥Èó≠È°µÈù¢',\r\n                cancelButtonText: 'ÁªßÁª≠ÁºñËæë',\r\n                type: 'warning'\r\n            })\r\n                .then(() => {\r\n                    // ÂÖ≥Èó≠ÁºñËæëÂô®ÁöÑÊµèËßàÂô®ÁïåÈù¢\r\n                    if (this.mode == 'create') {\r\n                        console.log('ÂàõÂª∫Êó∂ÂÖ≥Èó≠ÔºåÊó†ÈúÄËß£ÈîÅ');\r\n                        window.isCloseHint = false;\r\n                        window.close();\r\n                    } else {\r\n                        return request({\r\n                            url: '/doc/unlock',\r\n                            method: 'post',\r\n                            data: {\r\n                                id: this.docId\r\n                            }\r\n                        }).then(res => {\r\n                            if (res.code == 0) {\r\n                                window.isCloseHint = false;\r\n                                window.close();\r\n                            } else {\r\n                                ElMessage({\r\n                                    message: res.msg || 'Error',\r\n                                    type: 'error',\r\n                                    duration: 5 * 1000\r\n                                });\r\n                            }\r\n                        });\r\n                    }\r\n                })\r\n                .catch(() => {\r\n                    console.log('ÁªßÁª≠ÁºñËæë');\r\n                    // ElMessage({\r\n                    //     type: 'info',\r\n                    //     message: 'ÁªßÁª≠ÁºñËæë'\r\n                    // });\r\n                });\r\n        },\r\n        openIlinkDialog() {\r\n            // this.ilinkDialog.searchText = '';\r\n            this.ilinkDialog.show = true;\r\n            this.searchIlink();\r\n        },\r\n        searchIlinkEnter(e) {\r\n            if (e.keyCode == 13) {\r\n                this.searchIlink();\r\n            }\r\n        },\r\n        searchIlink() {\r\n            request({\r\n                url: '/collected/preview',\r\n                method: 'post',\r\n                data: { mode: this.ilinkDialog.searchMode, keyword: this.ilinkDialog.searchText, from: 'editor' }\r\n            }).then(res => {\r\n                if (res.code == 0) {\r\n                    this.ilinkDialog.collectedList = res.data;\r\n                }\r\n            });\r\n        },\r\n        addIlinkDoc(docTitle, collectedId, docId) {\r\n            this.$refs.editor.insert(selected => {\r\n                // [üß∞ Â∑•ÂÖ∑ËΩØ‰ª∂-Êï∞ÊçÆÂ∫ìÂ∑•ÂÖ∑ÔºöDBeaver](#hd.ilink->121981462344892416/121983064824872960)\r\n\r\n                const prefix = '[';\r\n                const suffix = '](' + config().hdIlinkFlag + collectedId + '/' + docId + ')';\r\n                const content = selected || docTitle;\r\n\r\n                return {\r\n                    // Ë¶ÅÊèíÂÖ•ÁöÑÊñáÊú¨\r\n                    text: `${prefix}${content}${suffix}`,\r\n                    // ÊèíÂÖ•ÂêéË¶ÅÈÄâ‰∏≠ÁöÑÊñáÊú¨\r\n                    selected: content\r\n                };\r\n            });\r\n            this.ilinkDialog.show = false;\r\n        },\r\n        openTempletDialog() {\r\n            // this.templetDialog.searchText = '';\r\n            this.templetDialog.show = true;\r\n            this.searchTemplet();\r\n        },\r\n        searchTempletEnter(e) {\r\n            if (e.keyCode == 13) {\r\n                this.searchTemplet();\r\n            }\r\n        },\r\n        searchTemplet() {\r\n            request({\r\n                url: '/collected/preview',\r\n                method: 'post',\r\n                data: { mode: this.templetDialog.searchMode, keyword: this.templetDialog.searchText, from: 'editor', isTemplet: true }\r\n            }).then(res => {\r\n                if (res.code == 0) {\r\n                    this.templetDialog.collectedList = res.data;\r\n                }\r\n            });\r\n        },\r\n        addTempletDoc(docTitle, collectedId, docId) {\r\n            request({\r\n                url: '/doc/get',\r\n                method: 'post',\r\n                data: { id: docId }\r\n            }).then(res => {\r\n                if (res.code == 0) {\r\n                    this.doc = res.meta.doc;\r\n                    this.content = this.doc.content;\r\n                    this.templetDialog.show = false;\r\n                }\r\n            });\r\n        },\r\n        formatContent(type) {\r\n            // switch (type) {\r\n            //     case 'chapterNumber':\r\n            //         {\r\n            //             let contentArray = _.split(this.content, '\\n');\r\n            //             console.log(contentArray);\r\n            //             let inCodeBlock = false;\r\n            //             _(contentArray).forEach(function (value) {\r\n            //                 if(value.startsWith('```')) includes = true;\r\n            //                 console.log(value);\r\n            //             });\r\n            //         }\r\n            //         break;\r\n            //     case '':\r\n            //     default:\r\n            //         break;\r\n            // }\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style>\r\n.el-tag + .el-tag {\r\n    margin-left: 10px;\r\n}\r\n.button-new-tag {\r\n    margin-left: 10px;\r\n    height: 32px;\r\n    line-height: 30px;\r\n    padding-top: 0;\r\n    padding-bottom: 0;\r\n}\r\n.input-new-tag {\r\n    width: 90px;\r\n    margin-left: 10px;\r\n    vertical-align: bottom;\r\n}\r\n/* ÂºïÁî®È°πÁõÆÁâπÊïà */\r\n.import-item {\r\n    cursor: pointer;\r\n    background: transparent;\r\n    border: 0;\r\n    border-radius: 0;\r\n    position: relative;\r\n    color: #636363;\r\n}\r\n.import-item:before {\r\n    transition: all 0 linear;\r\n    content: '';\r\n    width: 0%;\r\n    height: 100%;\r\n    background: #59a1ff46;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n}\r\n.import-item:hover:before {\r\n    background: #59a1ff46;\r\n    width: 100%;\r\n}\r\n</style>\r\n","<template>\r\n    <el-upload class=\"upload-demo\" :action=\"fileUploadUrl\" :headers=\"headers\" :data=\"data\" :on-success=\"handlerSuccess\" :on-preview=\"handlePreview\" :on-remove=\"handleRemove\" :before-upload=\"beforeUpload\" :before-remove=\"beforeRemove\" multiple :limit=\"10\" :on-exceed=\"handleExceed\" :file-list=\"fileList\" :accept=\"accept\">\r\n        <el-button size=\"small\" type=\"primary\">ÁÇπÂáª‰∏ä‰º†</el-button>\r\n        <template #tip>\r\n            <div class=\"el-upload__tip\">‰∏ä‰º† {{ fileTypeDesc }} Êñá‰ª∂ÔºàÊúçÂä°Âô®Á£ÅÁõòÁ©∫Èó¥ÊúâÈôêÔºåËØ∑Ê≥®ÊÑè‰∏™‰∫∫Ë¥¶Êà∑ÁöÑÁ©∫Èó¥Áî®ÈáèÔºâ</div>\r\n        </template>\r\n    </el-upload>\r\n</template>\r\n\r\n<script>\r\nimport { ElMessage } from 'element-plus';\r\nimport request from '../../../utils/request.js';\r\nimport { getToken } from '@/utils/auth';\r\nimport { config } from '@/utils/config';\r\nexport default {\r\n    props: {\r\n        uploadDataParams: Object,\r\n        callback: {\r\n            type: Function\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            fileUploadUrl: '', // ‰∏ä‰º†Êñá‰ª∂ÁöÑÂú∞ÂùÄ\r\n            headers: [], // ËØ∑Ê±ÇÂ§¥\r\n            data: {}, // ËØ∑Ê±ÇÂèÇÊï∞\r\n            fileList: [], // Êñá‰ª∂ÂàóË°®\r\n            fileType: '', // Êñá‰ª∂Á±ªÂûã\r\n            fileTypeDesc: '', // Êñá‰ª∂Á±ªÂûãÂêçÁß∞\r\n            accept: '*', // Êñá‰ª∂Á±ªÂûãÂºπÊ°ÜËøáÊª§\r\n            whiteList: [] // ÁôΩÂêçÂçï\r\n        };\r\n    },\r\n    mounted() {\r\n        console.log('mount begin');\r\n        this.fileUploadUrl = config().baseServer + 'f/u';\r\n        this.headers['Access-Token'] = getToken();\r\n        this.data = this.uploadDataParams;\r\n\r\n        console.log(this.data);\r\n\r\n        //  debugger;\r\n        let token = this.$store.state.user.token;\r\n        console.log('token-1-1-1: ' + token);\r\n\r\n        let name = this.$store.state.user.name;\r\n        console.log('name: ' + name);\r\n        console.log('mount end');\r\n    },\r\n    components: {},\r\n    methods: {\r\n        openPanel() {\r\n            console.log('openPanel');\r\n            this.fileList = [];\r\n\r\n            this.fileType = this.data.fileType;\r\n            switch (this.fileType) {\r\n                case 'image':\r\n                    this.fileTypeDesc = 'ÂõæÁâá';\r\n                    this.accept = 'image/*';\r\n                    this.whiteList = ['jpg', 'jpeg', 'png'];\r\n                    break;\r\n                case 'video':\r\n                    this.fileTypeDesc = 'ËßÜÈ¢ë';\r\n                    this.accept = 'video/*';\r\n                    this.whiteList = ['mp4'];\r\n                    break;\r\n                default:\r\n                    this.fileTypeDesc = 'ÂÖ∂‰ªñ';\r\n                    this.accept = '*';\r\n                    this.whiteList = [];\r\n                    break;\r\n            }\r\n        },\r\n        handleRemove(file, fileList) {\r\n            console.log(file, fileList);\r\n        },\r\n        handlePreview(file) {\r\n            console.log('handlePreview');\r\n            console.log(this.bucket);\r\n            console.log(this.bucket.id);\r\n            console.log(file);\r\n        },\r\n        handleExceed(files, fileList) {\r\n            this.$message.warning(`ÂΩìÂâçÈôêÂà∂ÈÄâÊã© 10 ‰∏™Êñá‰ª∂ÔºåÊú¨Ê¨°ÈÄâÊã©‰∫Ü ${files.length} ‰∏™Êñá‰ª∂ÔºåÂÖ±ÈÄâÊã©‰∫Ü ${files.length + fileList.length} ‰∏™Êñá‰ª∂`);\r\n        },\r\n        beforeUpload(file) {\r\n            const fileSuffix = file.name.substring(file.name.lastIndexOf('.') + 1);\r\n            if (this.whiteList.length > 0 && this.whiteList.indexOf(fileSuffix) === -1) {\r\n                this.$message.error('‰∏ä‰º†Êñá‰ª∂Ê†ºÂºè‰∏çÁ¨¶ÂêàË¶ÅÊ±Ç');\r\n                return false;\r\n            }\r\n\r\n            const isLt2M = file.size / 1024 / 1024 < 1024;\r\n\r\n            if (!isLt2M) {\r\n                this.$message.error('‰∏ä‰º†Êñá‰ª∂Â§ßÂ∞è‰∏çËÉΩË∂ÖËøá 1024MB');\r\n                return false;\r\n            }\r\n        },\r\n        handlerSuccess(response, file, fileList) {\r\n            this.callback(response.data);\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style>\r\n.el-main {\r\n    /* background-color: #e9eef3; */\r\n    /* color: #333; */\r\n    text-align: left;\r\n}\r\n.el-card {\r\n    margin: 10px;\r\n}\r\n</style>\r\n","import { render } from \"./DocFileUpload.vue?vue&type=template&id=686b7fc3\"\nimport script from \"./DocFileUpload.vue?vue&type=script&lang=js\"\nexport * from \"./DocFileUpload.vue?vue&type=script&lang=js\"\n\nimport \"./DocFileUpload.vue?vue&type=style&index=0&id=686b7fc3&lang=css\"\n\nimport exportComponent from \"D:\\\\code\\\\workspace\\\\mygithub\\\\Hidoc\\\\03_SRC\\\\hidoc-web\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// storage Ê∂àÊÅØÈÄöÁü•Âà∑Êñ∞È°µÈù¢‰ø°ÊÅØ\r\n//\r\nexport function uiRefresh(page, element, id) {\r\n    localStorage.setItem('ui-msg', JSON.stringify({ page: page, element: element, id: id, date: Date.now() }));\r\n}\r\n","import { render } from \"./editor.vue?vue&type=template&id=26057496\"\nimport script from \"./editor.vue?vue&type=script&lang=js\"\nexport * from \"./editor.vue?vue&type=script&lang=js\"\n\nimport \"./editor.vue?vue&type=style&index=0&id=26057496&lang=css\"\n\nimport exportComponent from \"D:\\\\code\\\\workspace\\\\mygithub\\\\Hidoc\\\\03_SRC\\\\hidoc-web\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./DocFileUpload.vue?vue&type=style&index=0&id=686b7fc3&lang=css\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./editor.vue?vue&type=style&index=0&id=26057496&lang=css\""],"sourceRoot":""}