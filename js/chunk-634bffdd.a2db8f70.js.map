{"version":3,"sources":["webpack:///./src/views/preview/colfocus.vue","webpack:///./src/views/preview/colfocus.vue?34b6","webpack:///./src/views/preview/colfocus.vue?160d"],"names":["style","_createElementVNode","_toDisplayString","title","_createVNode","_component_v_md_editor","id","content","$event","mode","ref","onCopyCodeSuccess","$options","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","data","docList","tempContent","mounted","document","getElementById","className","console","log","this","$route","params","collectedId","user","$store","state","watermark","set","realName","email","getContent","methods","getCollected","getAllDoc","fmtContent","request","url","method","then","res","code","meta","collected","docLites","name","list","that","item","getDoc","children","doc","length","_t","mdFormat","$nextTick","window","scrollTo","handleCopyCodeSuccess","ElMessage","message","type","duration","__exports__","render"],"mappings":"4IACSA,MAAA,sF,EAULC,gCAAa,SAAV,KAAM,G,EACTA,gCAAa,SAAV,KAAM,G,EACTA,gCAAa,SAAV,KAAM,G,EACTA,gCAAa,SAAV,KAAM,G,EACTA,gCAAkC,OAA7BD,MAAA,mBAAsB,S,EAC3BC,gCAA4C,OAAvCD,MAAA,+BAAgC,S,sKAfrCC,gCAEM,MAFN,EAEMC,kCADMC,OAAK,GAEjBF,gCAEM,YADFG,yBAA4HC,EAAA,CAA/GC,GAAG,Y,gBAA0BC,Q,uDAAAA,QAAOC,IAAEC,KAAK,UAAUC,IAAI,SAAUC,kBAAmBC,yBAAnG,6CAMJC,EACAC,EACAC,EACAC,EACAC,EACAC,O,8GAWW,G,UAAA,CACXC,KADW,WAEP,MAAO,CACHC,QAAS,GACTjB,MAAO,GACPI,QAAS,GACTc,YAAa,KAGrBC,QATW,WAUPC,SAASC,eAAe,iBAAiBC,UAAY,GAErDC,QAAQC,IAAI,eAAiBC,KAAKC,OAAOC,OAAOC,aAEhD,IAAIC,EAAOJ,KAAKK,OAAOC,MAAMF,KAC7BN,QAAQC,IAAIK,GACRA,GACAG,OAAUC,IAAIJ,EAAKK,SAAUL,EAAKM,OAGtCV,KAAKW,cAETC,QAAS,CACCD,WADD,WACc,2JACfb,QAAQC,IAAR,gBADe,SAET,EAAKc,eAFI,cAIff,QAAQC,IAAR,aAJe,SAKT,EAAKe,UAAU,EAAKtB,SALX,cAOfM,QAAQC,IAAR,cAPe,SAQT,EAAKgB,aARI,8CAUbF,aAXD,WAWgB,oKACXG,eAAQ,CACVC,IAAK,iBACLC,OAAQ,OACR3B,KAAM,CACFb,GAAI,EAAKuB,OAAOC,OAAOC,eAE5BgB,MAAK,SAAAC,GACY,GAAZA,EAAIC,MAAaD,EAAIE,KAAKC,WAAaH,EAAIE,KAAKC,UAAUC,WAC1D,EAAKhC,QAAU4B,EAAIE,KAAKC,UAAUC,SAClC,EAAKjD,MAAQ6C,EAAIE,KAAKC,UAAUE,KAChC9B,SAASpB,MAAQ,EAAKA,UAXb,8CAefuC,UA1BD,SA0BWY,GAAM,gKACdC,EAAO,EADO,iBAEDD,GAFC,gEAETE,EAFS,iBAGRD,EAAKE,OAAOD,EAAKlD,IAHT,WAIVkD,EAAKE,SAJK,kCAKJH,EAAKb,UAAUc,EAAKE,UALhB,6MAShBD,OAnCD,SAmCQnD,GAAI,oKACPsC,eAAQ,CACVC,IAAK,WACLC,OAAQ,OACR3B,KAAM,CACFb,GAAIA,KAETyC,MAAK,SAAAC,GACY,GAAZA,EAAIC,OACJ,EAAK5B,YAAc,EAAKA,YAAc,OAAS2B,EAAIE,KAAKS,IAAIpD,QAC5DmB,QAAQC,IAAR,eAAoBqB,EAAIE,KAAKS,IAAIxD,MAAjC,eAA6C6C,EAAIE,KAAKS,IAAIpD,QAAQqD,aAV7D,8CAcXjB,WAjDD,WAiDc,4JACXY,EAAO,EACPM,EAAKC,eAASP,EAAKlC,aACvB,EAAK0C,WAAU,WACXR,EAAKhD,QAAUsD,EAEfG,OAAOC,SAAS,EAAG,MAEvBvC,QAAQC,IAAR,yBAA8B,EAAKpB,QAAQqD,SAR5B,8CAUnBM,sBA3DK,SA2DiBjB,GAElBkB,eAAU,CACNC,QAAS,OACTC,KAAM,UACNC,SAAU,U,kCC1G1B,MAAMC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD,gB,mCCTf,W","file":"js/chunk-634bffdd.a2db8f70.js","sourcesContent":["<template>\r\n    <div style=\"line-height: 60px; text-align: center; font-size: 30px; font-weight: bold\">\r\n        {{ this.title }}\r\n    </div>\r\n    <div>\r\n        <v-md-editor id=\"vmdEditor\" v-model=\"this.content\" mode=\"preview\" ref=\"editor\" @copy-code-success=\"handleCopyCodeSuccess\" />\r\n    </div>\r\n    <!-- :style=\"{height: getHeight()}\" -->\r\n    <!-- <div style=\"height: 1000px\"></div> -->\r\n    <!-- <div style=\"page-break-after: always\"></div> -->\r\n    <!-- <p>&nbsp;</p> -->\r\n    <p>&nbsp;</p>\r\n    <p>&nbsp;</p>\r\n    <p>&nbsp;</p>\r\n    <p>&nbsp;</p>\r\n    <div style=\"height: 1000px\"></div>\r\n    <div style=\"page-break-after: always\"></div>\r\n</template>\r\n\r\n<script>\r\nimport request from '../../utils/request.js';\r\nimport { ElMessageBox, ElMessage } from 'element-plus';\r\nimport { mdFormat } from '../../utils/mdtools';\r\nimport watermark from '../../utils/watermark';\r\nimport _ from 'lodash';\r\nimport { nextTick } from 'vue';\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            docList: [],\r\n            title: '',\r\n            content: '',\r\n            tempContent: ''\r\n        };\r\n    },\r\n    mounted() {\r\n        document.getElementById('app-container').className = '';\r\n\r\n        console.log('collectedId:' + this.$route.params.collectedId);\r\n\r\n        var user = this.$store.state.user;\r\n        console.log(user);\r\n        if (user) {\r\n            watermark.set(user.realName, user.email);\r\n        }\r\n\r\n        this.getContent();\r\n    },\r\n    methods: {\r\n        async getContent() {\r\n            console.log(`getCollected`);\r\n            await this.getCollected();\r\n\r\n            console.log(`getAllDoc`);\r\n            await this.getAllDoc(this.docList);\r\n\r\n            console.log(`fmtContent`);\r\n            await this.fmtContent();\r\n        },\r\n        async getCollected() {\r\n            await request({\r\n                url: '/collected/get',\r\n                method: 'post',\r\n                data: {\r\n                    id: this.$route.params.collectedId\r\n                }\r\n            }).then(res => {\r\n                if (res.code == 0 && res.meta.collected && res.meta.collected.docLites) {\r\n                    this.docList = res.meta.collected.docLites;\r\n                    this.title = res.meta.collected.name;\r\n                    document.title = this.title;\r\n                }\r\n            });\r\n        },\r\n        async getAllDoc(list) {\r\n            let that = this;\r\n            for (let item of list) {\r\n                await that.getDoc(item.id);\r\n                if (item.children) {\r\n                    await that.getAllDoc(item.children);\r\n                }\r\n            }\r\n        },\r\n        async getDoc(id) {\r\n            await request({\r\n                url: '/doc/get',\r\n                method: 'post',\r\n                data: {\r\n                    id: id\r\n                }\r\n            }).then(res => {\r\n                if (res.code == 0) {\r\n                    this.tempContent = this.tempContent + '\\n\\n' + res.meta.doc.content;\r\n                    console.log(`读取文档：${res.meta.doc.title}，长度:${res.meta.doc.content.length}`);\r\n                }\r\n            });\r\n        },\r\n        async fmtContent() {\r\n            let that = this;\r\n            let _t = mdFormat(that.tempContent);\r\n            this.$nextTick(() => {\r\n                that.content = _t;\r\n                // 滚动到顶部\r\n                window.scrollTo(0, 0);\r\n            });\r\n            console.log(`所有文档内容合并，内容总长度：${this.content.length}`);\r\n        },\r\n        handleCopyCodeSuccess(code) {\r\n            // console.log(code);\r\n            ElMessage({\r\n                message: '复制成功',\r\n                type: 'success',\r\n                duration: 1 * 1000\r\n            });\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style>\r\n.el-container {\r\n    height: '';\r\n}\r\n.el-aside {\r\n    padding-right: 10px;\r\n    border-right: 1px solid #bbb;\r\n}\r\n.el-menu {\r\n    border-right: 0;\r\n}\r\n.el-drawer {\r\n    overflow: scroll;\r\n    overflow-x: hidden;\r\n    overflow-y: auto;\r\n}\r\n\r\n::-webkit-scrollbar {\r\n    width: 0px;\r\n    background-color: #d8d8d8;\r\n}\r\n\r\n/* 滚动槽 */\r\n::-webkit-scrollbar-track {\r\n    border-radius: 10px;\r\n}\r\n\r\n::-webkit-scrollbar-thumb {\r\n    background-color: #bfc1c4;\r\n}\r\n@media print {\r\n    body {\r\n        height: auto !important;\r\n    }\r\n}\r\n</style>\r\n","import { render } from \"./colfocus.vue?vue&type=template&id=51862065\"\nimport script from \"./colfocus.vue?vue&type=script&lang=js\"\nexport * from \"./colfocus.vue?vue&type=script&lang=js\"\n\nimport \"./colfocus.vue?vue&type=style&index=0&id=51862065&lang=css\"\n\nimport exportComponent from \"D:\\\\code\\\\workspace\\\\mygithub\\\\Hidoc\\\\03_SRC\\\\hidoc-web\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./colfocus.vue?vue&type=style&index=0&id=51862065&lang=css\""],"sourceRoot":""}